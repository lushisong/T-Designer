# 第4章 测试性建模技术

# 4.1 概述

测试性设计经历了从基于经验的设计、结构化的设计到基于模型的设计这样一个发展历程。基于模型的测试性设计是目前测试性设计的主流和未来的发展方向。测试性建模是这一设计方法的基础，选择一种好的模型是实现这一设计方法的前提。

目前，各个领域的建模理论层出不穷，建模方法日新月异，仅在故障诊断领域，就包括定量模型、定性模型、故障树模型、功能角色图模型、有向图模型、符号有向图模型、键合图模型等。这些模型虽然可用于故障诊断，但却不适合于指导测试性设计。由于测试性分析与设计最关注的是故障和测试，一种模型至少要能回答以下问题：系统中包括哪些故障和测试，每个故障能被哪些测试所观测，而每个测试又都能观测到哪些故障，这种模型才能用于测试性分析与设计，但是上述模型均不能满足这一要求。而事实上，能够回答上述问题的最简单的模型就是故障与测试间的相关性矩阵模型。所谓“相关”是指某个测试能观测到某个故障，相应的矩阵元素为1，若“不相关”则指该测试不能观测到该故障，相应的矩阵元素为0；这样一系列的“相关”和“不相关”就构成了相关性矩阵。基于相关性矩阵，即可分析系统中哪些故障是不可测的，哪些测试是冗余的，哪些故障构成模糊组；结合每个故障的故障率数据，可进一步预计系统的故障检测率和故障隔离率；再结合测试时间/成本等数据，还可进一步做测试性方案设计和诊断策略设计。

这种相关性矩阵模型不仅满足测试性分析与设计工作的基本要求，而且物理意义简单明了，因此成为测试性设计模型的很好选择。那么如何才能获得相关性矩阵呢？目前已有的方法包括三种：一是由其他诊断模型如故障树、符号有向图等模型分析得到相关性矩阵，Shakeri在博士论文中对此方法进行了阐述[1]；二是基于仿真分析得到相关性矩阵，特别是基于物理模型做定量仿真得到相关性矩阵，Sujoy等介绍了这一方法[2]；三是通过建立“信息流模型”或“多信号模型”等框图模型，分析图中每个故障节点沿传播路径所能达到的测试节点，从而得到相关性矩阵。

第一种方法需要先建立诊断模型，建立诊断模型的难度较大，而将诊断模型转

换为相关性矩阵的难度更大。第二种方法需要建立精确的定量模型，对于电路系统利用仿真软件可以实现，但是对于其他混合系统则难以实现。第三种方法由于框图模型的构建不仅简单直观，而且通过故障传播路径的搜索得到相关性矩阵也十分容易，已成为目前测试性建模的主流方法，这两种建模方法分别被测试性建模分析软件 STAMP 和 TEAMS 所采用。

信息流模型(information flow model)是由ARINC公司的Sheppard和防御分析协会(Institute for Defense Analyses)的Simpson于20世纪80年代提出的[3~11]。多信号模型(multi signal model)也称为多信号流图模型，是由美国康涅狄格大学的Pattipati与Deb等于20世纪90年代提出的[12,13]。这两种模型的前身可追溯到20世纪60年代，由DSI公司创始人DePaul所提出的逻辑模型(logic model, LOGMOD)[14]。逻辑模型是最早被应用于测试性分析与设计的模型，由此模型开始，后来又发展出相关性模型（dependency model)[15,16]、因果模型（causal effect model)[17]、诊断推理模型（diagnostic inference model)[18,19]、信息流模型、多信号模型以及混合诊断模型(hybrid diagnostic model)[20]。其中混合诊断模型被另一款著名的测试性建模分析软件eXpress采用。近年来，国内学者对测试性模型特别是多信号模型开展了大量的应用研究，在不少装备中取得了一定的应用成果[21~27]。

然而，现有的以信息流模型和多信号模型为代表的测试性模型并非十全十美，也有其局限性：①仅考虑了故障与测试间的关联关系，而没有考虑其他的相关因素；②仅从系统功能层面建立故障与测试的关联关系，且描述为一种确定性的关联关系，没有考虑不确定性；③是一种静态的描述模型，不能动态模拟系统故障的产生过程以及测试与诊断的实施过程。对此，学术界掀起了对测试性模型新一轮的研究热潮。其中，针对第二个问题，龙兵分析了多信号模型在描述不确定信息方面的不足，提出了一种不确定建模技术[28]，杨鹏在分析二值相关性矩阵模型不足的基础上，提出了不确定相关性矩阵模型[29]；针对第一个问题，钱彦岭研究了基于EXPRESS-G语言的测试性信息描述模型[30]，连光耀在此基础上进一步研究了基于XML语言的测试性信息描述模型[31]，陈希祥研究了基于本体语言的测试性信息描述模型[32]。

本章首先引入故障与测试相关性的概念；在此基础上，介绍获取相关性矩阵的方法，包括由故障树生成相关性矩阵、基于仿真分析生成相关性矩阵；然后，系统阐述信息流模型和多信号模型的基本理论和建模方法；最后，介绍测试性模型的扩展以及测试性信息描述模型。

# 4.2 故障与测试相关性的概念

按照美国国军标 MIL-STD-2165 和我国国军标 GJB2547—95 的定义，测试性是指系统或设备能够及时并准确地确定其状态并隔离其内部故障的一种设计特性。由此可见，构成测试性设计问题的基本要素有三个，其一为故障，其二为测试，其三为二者之间的相关性。

(1) 故障(fault): 可靠性工程的一个基本术语, 通常理解为“规定功能的丧失”。在我国国军标 GJB451—90《可靠性和维修性术语》中, 将故障定义为“产品或产品的一部分不能或将不能完成预定功能的事件或状态”。  
(2) 测试(test): 一个基本的科学概念, 通常指一种科学的装备试验方法, 它按照行业或用户提出的技术规范, 通过模拟使用环境和工作条件取得装备的功能特性、可靠性、稳定性、工作寿命和环境适应性等内在质量的参数。在测试性设计中, 测试除要获得某些特定参数外, 还要根据这些参数确定系统的“健康”状况 (是否故障)。因此, 测试是指在真实和模拟的条件下, 为确定产品的性能、特性、适用性或能否有效可靠地工作, 以及查找故障原因和所在部位所采取的措施、操作过程或活动。  
（3）相关性(dependency)：一般是指某个实体(物理的或概念的)与另一实体之间的因果关系。这种相关性是有指向性的，若由  $x$  可推出  $z$  ，则称  $z$  与  $x$  相关，或者  $z$  依赖于  $x$  ；若  $x$  与  $z$  可以互推，则称二者是互相关的。系统中的故障与测试就具有这种相关性，若由故障  $f_{i}$  发生可推出测试  $t_j$  不通过，且由  $t_j$  通过可推出  $f_{i}$  未发生，则称  $t_j$  和  $f_{i}$  是互相关的，或者称  $t_j$  是一个对称测试。若仅能由  $f_{i}$  发生推出  $t_j$  不通过，而不能由  $t_j$  通过推出  $f_{i}$  未发生，则称  $t_j$  是非对称测试[9]。  
（4）相关性矩阵（dependency matrix）：反映各实体间相关性的布尔矩阵。若某列所对应的实体与某行所对应的实体相关，则相应的元素为1，否则为0。本章重点考虑故障与测试之间的相关性矩阵，记为

$$
\begin{array}{r l} & \boldsymbol {T} _ {1} \quad \boldsymbol {T} _ {2} \quad \dots \quad \boldsymbol {T} _ {n} \\ \boldsymbol {F T} = \boldsymbol {F} _ {2} & \left[ \begin{array}{l l l l} f t _ {1 1} & f t _ {1 2} & \dots & f t _ {1 n} \\ f t _ {2 1} & f t _ {2 2} & \dots & f t _ {2 n} \\ \vdots & \vdots & & \vdots \\ f t _ {m 1} & f t _ {m 2} & \dots & f t _ {m n} \end{array} \right] \end{array} \tag {4.1}
$$

式中，矩阵元素  $f t_{ij}$  一般为一布尔变量，如果故障  $f_{i}$  能被测试  $t_j$  观测，则令  $f t_{ij} = 1$ ；否则令  $f t_{ij} = 0$ 。矩阵第  $i$  行矢量  $\mathbf{F}_i = [f t_{i1}, f t_{i2}, \dots, f t_{in}]$  描述了故障  $f_i$  发生时

全部测试的输出结果，可视为故障  $f_{i}$  的征兆；第  $j$  列矢量  $\pmb{T}_{j} = [ft_{1j}, ft_{2j}, \dots, ft_{mj}]^{\mathrm{T}}$  描述了测试  $t_{j}$  可以检测到的所有故障，可反映  $t_{j}$  的故障检测能力。由相关性矩阵定义两个集合，故障征兆(fault signature)集和测试征兆(test signature)集，其中故障  $f_{i}$  影响的测试集，测试  $t_{j}$  所能检测的故障集，分别记为

$$
T \left(f _ {i}\right) = \left\{t _ {j} \mid f t _ {i j} = 1, \forall t _ {j} \right\} \tag {4.2}
$$

$$
F \left(t _ {j}\right) = \left\{f _ {i} \mid f t _ {i j} = 1, \forall f _ {i} \right\} \tag {4.3}
$$

以下如不特别指出，相关性矩阵即指装备系统的故障-测试相关性矩阵。系统中的故障集记为  $F$  ，  $m$  表示故障总个数；测试集记为  $T$  ，  $n$  表示测试总个数。

直接得到一个系统的相关性矩阵是困难的，特别是当系统故障模式和测试数量较多的时候，因此下面介绍几种间接获取相关性矩阵的方法。

# 4.3 相关性矩阵获取方法

# 4.3.1 基于故障树生成相关性矩阵的方法

测试性设计的最终目的是为了便于故障诊断，因此人们很自然地想到由某种诊断模型来获取相关性矩阵。故障树是一种经典的诊断模型，而且在进行可靠性分析时往往需要建立装备的故障树。因此，只要得到了一个装备的故障树，就可以利用本小节的方法生成相关性矩阵。

由于故障树主要描述的是系统故障及其因果关系，因此必须首先从故障树中分析出隐含的测试项目。Shakeri[1]认为：在一个故障树模型中，特定节点都存在一组确定故障的测试集；基于这些测试集，相关性矩阵可以按照以下原则生成：

（1）规定每一个输出端点是一个测试。  
（2）规定每一个输入端点是一个底事件。  
（3）计算故障树模型中每一个测试对应的最小故障集。  
（4）规定最小故障集是故障源。  
（5）相关性矩阵  $\mathbf{FT} = \left[ f t_{ij} \right]_{m \times n}$  的第  $i$  行第  $j$  列元素  $f t_{ij} = 1$ ，若第  $i$  个故障模式(割集)是第  $j$  个测试割集；否则， $f t_{ij} = 0$ 。

下面以两个案例来说明由故障树模型来生成相关性矩阵的具体过程。

案例1[1] 图4.1描述的是某个制冷系统的故障树模型。

图4.1 制冷系统故障树模型

如图4.1所示的制冷系统有一个输出端，没有输入端，三个测试点分别放置在冷却液供给处、冷却液输送系统和制冷系统。对应于冷却液供给处，冷却液输送系统和制冷系统的故障集分别是{{冷却液储存装置}，{冷却液输送管}},{冷却液储存装置}，{冷却液输送管}，{主泵，备用泵}和{{冷却液储存装置}，{冷却液输送管}，{主泵，备用泵}，{冷却装置}。

根据前面给出的分析准则，得到该系统的相关性矩阵，如表4.1所示。

表 4.1 制冷系统相关性矩阵  

<table><tr><td rowspan="2">故障</td><td colspan="3">测试</td></tr><tr><td>冷却液供给</td><td>冷却液输送</td><td>冷却系统</td></tr><tr><td>冷却液储存装置</td><td>1</td><td>1</td><td>1</td></tr><tr><td>冷却液输送管道</td><td>1</td><td>1</td><td>1</td></tr><tr><td>主、备用泵</td><td>0</td><td>1</td><td>1</td></tr><tr><td>冷却装置</td><td>0</td><td>0</td><td>1</td></tr></table>

案例2[1] 图4.2为某热水供应系统的结构框图，该系统共包括11个部件：阀门、水箱、水位传感器(LS)、水位控制器(LC)、水管、水泵、流量传感器(FS)、流量控制器(FC)、加热器、温度传感器(TS)和温度控制器(TC)。

图4.2 某热水供应系统

该系统的顶事件有两个，一个是输出流量不正常故障，另一个输出水温不正常故障。首先通过分析建立水温输出故障和水流输出故障的故障树模型，分别如图4.3和图4.4所示。

图4.3 水温输出(加热器)故障的故障树模型

图4.4 水流输出故障的故障树模型

基于上述故障树模型，利用前面给出的分析准则，得出热水供应系统的相关性矩阵，如表4.2所示。其中，  $t_7$  表示输出测试，  $t_1 \sim t_6$  分别检查热水器输出部分的阀门、水箱、管道、泵、水流和水温的故障。

表 4.2 热水供应系统的相关性矩阵  

<table><tr><td rowspan="2">故障</td><td colspan="7">测试</td></tr><tr><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td></tr><tr><td>输入1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>输入2</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>输入3</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>输入4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>阀门</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>水箱</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>LS</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>LC</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>管道</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>泵</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>FS</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>FC</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>加热装置(管道)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td></tr><tr><td>加热装置(加热部件)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>TS</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>TC</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td></tr></table>

# 4.3.2 基于仿真分析生成相关性矩阵的方法

在装备设计时，为了分析装备性能会建立其定量模型。若装备定量模型能够支持故障模拟，则可以基于该定量模型进行故障与测试仿真，从而获得相关性矩阵。前提是要事先定义好故障模型和测试模型，并且这些模型能够集成到装备定量模型中去。

下面通过典型案例，介绍几种不同系统如何通过仿真分析生成相关性矩阵。

案例3 模拟系统。

如图4.5所示为一阶有源低通滤波器的电路图，该电路包括运算放大  $U_{1}$  、电阻  $R_{1}$  和电容  $C_{1}$ ，电路中设  $\mathrm{TP_0}$  和  $\mathrm{TP}_{1}$  两个测点，分别检测相应点的有效电压值和输出波形。这是一个典型的模拟系统。一些经典的电路仿真分析软件，如Spice、PSpice、Multisim等均可模拟电路中断路、开路、超差等故障，这些工具不仅

提供设计平台，还提供仿真功能。本节选择Multisim软件进行故障仿真分析，生成该电路的相关性矩阵。

图4.5 一阶有源低通滤波器电路图

首先利用Multisim软件建立电路模型，定义5种故障，其中O代表开路故障，S代表短路故障，T代表超差故障，L代表线性度故障，G代表增益故障。下面将依次向模型中注入上述故障，分析各元器件在不同故障下，在两个测点上的反应，得到仿真数据，如表4.3所示。

表 4.3 低通滤波器实验数据  

<table><tr><td rowspan="2">状态</td><td colspan="3">\( \mathrm {T P}_{0} \)</td><td colspan="3">\( \mathrm {T P}_{1} \)</td></tr><tr><td>电压值</td><td>电流值</td><td>波形图</td><td>电压值</td><td>电流值</td><td>波形图</td></tr><tr><td>无故障</td><td>664.6nV</td><td>83.88pA</td><td>图 4.6</td><td>997.0μV</td><td>168.8nA</td><td>图 4.9</td></tr><tr><td>R1O</td><td>0</td><td>0</td><td>图 4.6</td><td>0</td><td>0</td><td>图 4.6</td></tr><tr><td>R1S</td><td>666.5μV</td><td>666.5kA</td><td>图 4.7</td><td>997.0μV</td><td>168.8nA</td><td>图 4.9</td></tr><tr><td>R1T</td><td>1.329μV</td><td>215.4pA</td><td>图 4.8</td><td>1.994mV</td><td>337.7nA</td><td>图 4.10</td></tr><tr><td>R2O</td><td>996.7μV</td><td>168.1nA</td><td>图 4.9</td><td>0</td><td>0</td><td>图 4.15</td></tr><tr><td>R2S</td><td>0</td><td>0</td><td>图 4.6</td><td>0</td><td>1fV</td><td>图 4.6</td></tr><tr><td>R2T</td><td>332.8nV</td><td>54.16pA</td><td>图 4.11</td><td>449.2μV</td><td>84.42nA</td><td>图 4.12</td></tr><tr><td>C1O</td><td>665.9nV</td><td>83.98pA</td><td>图 4.7</td><td>999.0μV</td><td>168.4nA</td><td>图 4.9</td></tr><tr><td>C1S</td><td>0</td><td>0</td><td>图 4.6</td><td>0</td><td>1fV</td><td>图 4.6</td></tr><tr><td>C1T</td><td>665.6nV</td><td>83.98pA</td><td>图 4.7</td><td>998.4μV</td><td>168.7nA</td><td>图 4.9</td></tr><tr><td>A1S</td><td>449.2μV</td><td>0</td><td>图 4.13</td><td>0</td><td>0</td><td>图 4.15</td></tr><tr><td>A1G</td><td>1.06μV</td><td>190.5pA</td><td>图 4.8</td><td>1.596nV</td><td>284.8nA</td><td>图 4.14</td></tr></table>

测量电路在不同元器件发生故障的情况下  $\mathrm{TP_0}$  和  $\mathrm{TP_1}$  两个测点的输出波形，如图4.6～图4.15所示。


图4.6 幅值为  $1\mathrm{mV}$  的直流波

图4.8 波峰为  $2.84\mathrm{mV}$  、波谷为  $0.85\mathrm{mV}$  的正弦波

图4.10 幅值为  $2.821\mathrm{V}$  的正弦波  
图4.12 幅值为  $707.8\mathrm{mV}$  的正弦波


图4.7 波峰为  $1.939\mathrm{mV}$  、波谷为0的正弦波

图4.9 幅值为1.408V的正弦波

图4.11 波峰为  $1.46\mathrm{mV}$  、波谷为  $0.45\mathrm{mV}$  的正弦波  
图4.13 幅值为  $-9.794\mathrm{V}$  的正弦波

图4.14 幅值为  $2.258\mathrm{V}$  的正弦波

图4.15 幅值为一  $21\mathrm{V}$  的直流波

逐个比较故障状态与正常状态下的仿真波形，即可得一阶有源低通滤波电路的相关性矩阵，如表4.4所示。

表 4.4 低通滤波电路的相关性矩阵  

<table><tr><td rowspan="2">\( \mathbf{{FT}} \)</td><td colspan="6">\( {\mathrm{{TP}}}_{0} \)</td><td colspan="8">\( {\mathrm{{TP}}}_{1} \)</td></tr><tr><td>S0</td><td>S1</td><td>S2</td><td>S3</td><td>S4</td><td>S5</td><td>S0</td><td>S1</td><td>S2</td><td>S4</td><td>S6</td><td>S7</td><td>S8</td><td>S9</td></tr><tr><td>R1O</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>R1S</td><td>0</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>R1T</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>R2O</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>R2S</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>R2T</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>C1O</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>C1S</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>C1T</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>A1S</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>A1G</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>A1L</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table>

注：S0: 是否为 0; S1: 电压测量; S2: 电流测量; S3: 直流波; S4: 无输出; S5: 幅值为  ${1.409}\mathrm{\;V}$  正弦波; S6: 幅值为  ${1.410}\mathrm{\;V}$  的正弦波; S7: 幅值为  ${2.82}\mathrm{\;V}$  的正弦波; S8: 幅值为  ${708.1}\mathrm{{mV}}$  的正弦波; S9: 幅值为  ${1.258}\mathrm{\;V}$  的正弦波。

图4.16 逻辑电路

# 案例4 数字系统。

图4.16为一数字逻辑电路，以该电路为例说明数字系统的相关性矩阵生成方法。

VHDL语言是数字系统的常用建模语言，它将数字系统的硬件描述为实体。一个实体有

两种描述方式：结构描述，即描述不同元件的连接关系；行为描述，即描述实体的行为。通过这两种描述，可以对数字系统建立描述模型。

在结构层面，数字系统的故障模型主要为固定故障模型，一般可以是线路固定在某个值或者规定逻辑固定输出某个逻辑值，即  $\mathrm{s - a - 0}$  和  $\mathrm{s - a - 1}$  。门级组合电路的测试由激励矢量和观测输入矢量构成，首先仿真系统无故障状态，依次注入激励，观察系统输出矢量；然后仿真单故障状态，依次注入激励，观察实际输出并与期望输出比较，若相异，则认为该测试可以检测该故障，否则视为不能检测，与模拟电路相比，不必考虑门限的设定，相对简单。

如图4.16所示的门级电路，假设故障为线路固定故障，图中有4条连接线，故障模式简化描述为  $a_0, b_0, c_0, d_0, e_0$  和  $a_1, b_1, c_1, d_1, e_1$  。可以控制的输入点为  $a, b, c$  ，定义4个输入激励矢量：  $\pmb{T}_1 = [010], \pmb{T}_2 = [011], \pmb{T}_3 = [100]$  和  $\pmb{T}_4 = [110]$ ，依次仿真上述定义的故障模式，如故障  $a_0$  ，再依次注入上述激励，如  $\pmb{T}_1$  ，观察输出端  $e$  ，比较  $e$  端实际输出与期望(正常)输出：若二者相同，则说明由该激励和输出端构成的测试  $t_1$  不能发现故障  $a_0$  ；若二者相异，则说明  $t_1$  可以发现  $a_0$  。由此分析可以得到如表4.5所示的相关性矩阵。

表 4.5 相关性矩阵  

<table><tr><td rowspan="2">故障</td><td colspan="4">测试</td></tr><tr><td>t1</td><td>t2</td><td>t3</td><td>t4</td></tr><tr><td>a0、b0、d0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>a1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>b1</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>c0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>c1、d1、e1</td><td>1</td><td>0</td><td>1</td><td>0</td></tr><tr><td>e0</td><td>0</td><td>1</td><td>0</td><td>1</td></tr></table>

案例5 机械系统[33]。

一般机械系统的故障诊断主要是通过对测量信号的特征分析进行的，它的观测点可能是有限的，但是通过特征分析可以提取出多个有用特征，将这些特征定义为测试，则可分析得到相关性矩阵。其主要步骤是：①选择监测系统工况的特征信号；②进行特征提取。

下面以英国R.R公司的SK15HE型燃气轮发电机组为例说明机械系统相关性矩阵的生成方法[33]。

按照特征频谱将该发电机组的一次性故障分为六类： $f_{1}$  转子故障、 $f_{2}$  轴系故障、 $f_{3}$  支承系统故障、 $f_{4}$  共振及临界转速故障、 $f_{5}$  部件故障和  $f_{6}$  其他故障，如图 4.17 所示。

图4.17 SK15HE型燃气发电机组常见故障分类

旋转机械的特点是振动及振幅中包含其运行状态信息，因此只需要测试其振动信号即可。首先将其振动频谱信息划分为11个特征频谱带，每个谱带对应一个测试输出，如表4.6所示。

表 4.6 测试的定义  

<table><tr><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td><td>t11</td></tr><tr><td>0.4～</td><td>0.9～</td><td>1.8～</td><td>2.8～</td><td>3.8～</td><td>0.9～</td><td>1.9～</td><td>0.8～</td><td>0.8～</td><td>0.8～</td><td>0.8～</td></tr><tr><td>0.75</td><td>1.1</td><td>2.2</td><td>3.2</td><td>4.2</td><td>1.1</td><td>2.1</td><td>1.2</td><td>1.2</td><td>1.2</td><td>1.2</td></tr><tr><td>发电机</td><td>发电机</td><td>发电机</td><td>发电机</td><td>发电机</td><td>P.T.</td><td>P.T.</td><td>齿轮啮合</td><td>叶片</td><td>临界</td><td>结构共振</td></tr></table>

由表4.6可以看出不同故障类别的频谱范围存在混叠，因此单一的测试输出是不能隔离这些故障类别的。经分析计算可得到不同的测试输出与系统状态之间的相关性矩阵，如表4.7所示。

表 4.7 相关性矩阵  

<table><tr><td rowspan="2">故障</td><td colspan="11">测试</td></tr><tr><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td><td>t11</td></tr><tr><td>f1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>f2</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>f3</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>f4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>f5</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>f6</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td></tr></table>

由于该测试测量的是振动信号的频谱，实际的测试输出并不单一的一种频谱范围，有可能是这11种结果中的任何一种组合，我们就根据实际测试输出组合来进行故障隔离。

# 4.4 经典测试性模型

4.3节介绍了两种获取相关性矩阵的方法，本节重点介绍第三种方法——由信息流模型和多信号模型获得相关性矩阵的方法。在介绍这两种模型之前，首先简要介绍一下故障的传播特性以及“一阶相关”和“全阶相关”的概念。

# 4.4.1 测试性模型基本原理

# 1. 故障传播特性

从信息流模型和多信号模型(也称多信号流图模型)的名称可以看出它们是一种流图模型，或者有向图模型。事实上，它们均反映了故障在系统中的传播特性。

任何一个系统总由若干个单元串联或并联构成，当一个单元发生故障后，往往会影响后续单元的正常工作，这就是故障的传播特性。高层次的故障必然由低层次故障所引起，而低层次的故障可能引起高层次的故障。这种由低层次向高层次逐级发展的故障特点就是故障在层级间的传播，也称为故障的“纵向”传播。当系统的某一个层次的某个单元发生故障后，可能导致与它同层次单元的状态发生变化，从而产生新的故障，这就带来了系统中同一层次有多个故障并存的状况。这种系统故障在同层次内的传播，也称为故障的“横向”传播。

故障的传播通常与系统的结构特点密切相关。例如，一个带有四个插座的接线板，不同的设计导致故障的传播路径也不同。

设计1：如图4.18所示，四个插座连接在两个铜片上面，与一个保险丝串联。

图4.18 设计1的拓扑结构

铜片一般不会烧断, 但保险丝烧断后将造成四个插座无输出, 由此可以画出设

计1的故障传播有向图，如图4.19所示。

图4.19 设计1的故障传播有向图

设计2：如图4.20所示，四个插座自保险丝后采用独立的线路，分别与同一个保险丝串联。

图4.20 设计2的拓扑结构

当保险丝烧断后将造成四个插座无输出，每个插座的连接线断路后只会影响该插座的输出，由此可以画出设计2的故障传播有向图，如图4.21所示。

图4.21 设计2的故障传播有向图

设计3：如图4.22所示，四个插座从左至右串联在一条线路上，然后与一个保险丝串联。

当保险丝烧断后将造成四个插座无输出，当一条电线断路后不仅影响直接与之相连的插座的输出，还会影响右边几个插座的输出，由此可以画出设计3的故障传播有向图，如图4.23所示。

图4.22 设计3的拓扑结构

图4.23 设计3的故障传播有向图

机械系统不同于电子系统，其故障传播涉及各种特征参数，正是这些特征信号将故障影响传播出去。机械系统传播故障信息的特征参数包括：①按照测量对象划分，特征参数包括加速度、速度、位移、温度、压力、应力、扭矩、转速以及噪声声压、声强、磨粒颗粒度、浓度等；②按照特征抽取的方法可分为：幅域参数、时域参数和频域参数。

机械系统是一个由若干功能单元组成的有机系统，通常具有模块化结构、功能分层模块化等特点，可以分为系统级、子系统级、功能模块级以及零部件级等多个层次。对于整个机械系统而言，故障一般是在系统的零部件级产生，然后逐级向上传播，直到系统级。系统级故障对应于系统的功能失调或破坏，零部件级故障为最底层故障。对于某一层次的子系统的故障，其产生原因包括以下几个方面：

（1）同该子系统相关的下一层次的功能模块发生故障；  
（2）同该子系统相关的同一层次的子系统发生故障；  
（3）该子系统同其他相关子系统之间的联系或该子系统内部各功能模块之间的联系失调；  
（4）由于外部因素，使得系统的工作条件被破坏。

故障在机械系统中的传播过程一般是由其层次结构的最低层逐层向上传播的，即零部件级  $\rightarrow$  功能模块级  $\rightarrow$  子系统级  $\rightarrow$  系统级。某一层次的单元发生故障后，无论其输入如何，其输出必然异常。而这种异常又必将通过某种联系作为其上位层次单元的输入，从而导致上位层次单元的劣化，直到系统级。

机械系统中的故障演变过程是多种形式故障的继发和并发过程。在故障树分析中，可以利用上行法或下行法求得系统的多个最小故障割集，究竟哪一个割集导致系统故障的产生，取决于每个割集中各组成元素的形成速率以及这些最低层次的故障传递到系统级的时间长短。这就是机械系统中故障演变和传播历程的“劣化竞争”现象。

根据故障的传播特性，下面引入一阶相关和全阶相关的概念。

# 2. 一阶相关和全阶相关

一阶相关(first order dependency)是指直接的因果关系。例如，由  $x$  可直接推出  $z$ ，则称  $x$  与  $z$  一阶相关。故障传播有向图中某故障节点与某测点直接相连，称二者为一阶相关。

$N$  阶相关（Nth-order dependency)也称为高阶相关，是指间接的因果关系。例如，由  $w$  可推出  $x$  ，由  $x$  可推出  $y$  ，再由  $y$  可推出  $z$  ，则称  $z$  与  $w$  为三阶相关， $y$  与  $w, z$  与  $x$  为二阶相关。系统中若某故障节点通过一些中间节点与某测点相连，则称二者为  $N$  阶相关。

全阶相关(full-order dependency)是指全部的直接和间接因果关系，是一阶相关和高阶相关的集合。式(4.1)定义的相关性矩阵描述的就是故障与测试的全阶相关。

下面举例说明上述概念。图4.24为某系统的故障传播有向图模型，该模型由7个模块(方框)和10个测试(圆圈)构成。

图4.24 故障传播有向图

根据一阶相关的定义，测试  $t_1$  与故障  $f_1$  直接相连，因此为一阶相关；同理，  $t_2$  与  $f_2, t_3$  与  $f_3, t_4$  与  $f_4$  也为一阶相关，以此类推得到该系统的一阶相关性矩阵，如表4.8所示。表中“1”对应的行列要素相关，“0”对应的行列要素不相关。

表 4.8 一阶相关性矩阵  

<table><tr><td>一阶矩阵</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td></tr><tr><td>f1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>f2</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>f3</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>f4</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>f5</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>f6</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>f7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td></tr></table>

由于故障的传播特性， $f_{1}$  通过  $f_{2}$  间接地被  $t_{2}$  检测到，因此  $t_{2}$  与  $f_{1}$  为二阶相关；同理  $t_{4}$  与  $f_{2}$  和  $f_{3}$  也为二阶相关， $t_{4}$  与  $f_{1}$  为三阶相关。以此类推得到该系统的全阶相关矩阵，即相关性矩阵，如表4.9所示。

表 4.9 全阶相关性矩阵  

<table><tr><td>全阶矩阵</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td></tr><tr><td>f1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f2</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f3</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f4</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f5</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f6</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>f7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td></tr></table>

由上述案例可知，只要建立了故障传播有向图，即可直接获得一阶相关性矩阵；在此基础上，进一步分析故障传播即可得到全阶相关性矩阵。但是故障传播有向图过于简单，不能全面描述系统特性，因此，人们提出了两种改进了的故障传播有向图模型——信息流模型和多信号模型，这两种模型是经典的测试性模型。

# 4.4.2 信息流模型

# 1. 基本理论

信息流模型[9]的基本元素是“测试”和“故障隔离结论”。其中，测试是指用于判断一个系统健康状况的所有信息源，如观察到的不正常物理现象、BIT的数据、ATE的激励响应等。可测试的输入也被看做一种特殊的测试。

故障隔离结论包括元件、芯片、组件、子系统、系统的功能失效，特殊的非硬件

故障(如总线时钟错误)、特殊的多故障、故障指示失灵、系统输入不正常等所有故障。

信息流模型还包括三个特殊的故障隔离结论：“可测试的输入”、“不可测试的输入”和“无故障的结论”。这里，输入代表进入系统内部并对系统健康状态有直接影响的信息，因此可视为一类特殊的故障隔离结论。若一个外部激励与某个测试相结合可以检查该激励的有效性，则该外部激励为可测试的输入；否则为不可测试的输入。可测试的输入还可视为一个特殊的测试。无故障的结论表示系统测试集合发现系统无故障，有时也表示系统重测合格(RTOK)的状态。

信息流模型采用有向图来表示测试和故障结论之间的相关关系（dependency relationship），如图4.25所示，图中节点为测试和故障隔离结论，有向边为信息流动的方向。

图4.25 信息流模型示意图

文献[9]中定义了两个相关性矩阵，分别是故障-测试相关性矩阵  $FT$  和测试-测试相关性矩阵  $TT$ 。图4.25所示系统的矩阵  $FT$  如表4.10所示，矩阵  $TT$  如表4.11所示。

表 4.10 故障隔离结论与测试相关性矩阵  

<table><tr><td>FT</td><td>int1</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td></tr><tr><td>int1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f2</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>f3</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f4</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>f5</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr></table>

续表  

<table><tr><td>FT</td><td>int1</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td></tr><tr><td>f6</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td></tr><tr><td>f7</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>f8</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>f9</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>无故障结论</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table>

表 4.11 测试与测试相关性矩阵  

<table><tr><td>TT</td><td>int1</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td></tr><tr><td>int1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>t1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>t2</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>t3</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>t4</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>t5</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>t6</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>t7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr></table>

下面解释一下这两个矩阵，首先做如下规定：对输出异常(fail)的测试赋予逻辑值“真”，对输出正常(pass)的测试赋予逻辑值“假”；对被确认的故障隔离结论赋值为“真”，对被排除的故障隔离结论赋值为“假”。则两个矩阵表示的含义如下：

（1）矩阵  $FT$  的行表示：哪些测试可以检测该行对应的故障隔离结论，当该故障隔离结论发生时，该行“1”元素对应的测试输出均异常。例如，根据表4.10，若故障隔离结论  $f_{2}$  发生，则  $t_2, t_3, t_7$  输出均异常。该关系可表示为

$$
f _ {j} \Rightarrow \bigwedge_ {i} t _ {i} \quad (\text {i f} \quad f t _ {j i} = 1) \tag {4.4}
$$

式中， $\Lambda$  表示逻辑“与”。该式表示故障隔离结论  $f_{j}$  为“真”，则推出满足条件  $f t_{j i} = 1$  的测试均为“真”。

(2) 矩阵  $FT$  的列表示: 该列对应的测试可以检测哪些故障隔离结论, 即当该列中“1”元素对应的故障隔离结论有一个发生时, 则该列对应的测试输出异常。例如,  $\mathrm{int}_{1}$  异常或  $f_{1}$  发生, 则  $t_{1}$  输出异常。这种关系可表示为

$$
\rightarrow t _ {i} \Rightarrow \bigwedge_ {j} \rightarrow f _ {j} \quad (\text {i f} \quad f t _ {j i} = 1) \tag {4.5}
$$

式中，一为逻辑“非”。该式表示测试  $t_i$  为“假”，则推出满足条件  $ft_{ji} = 1$  的故障均为“假”，也就是说  $t_i$  输出正常，则它能检测到的故障隔离结论必然均未发生。

(3) 矩阵  $TT$  的行表示: 若该行对应的测试输出异常, 则该行中“1”元素对应的

测试输出均异常。例如，根据表4.11， $t_2$  输出异常时， $t_3$  和  $t_7$  输出必异常。这种关系可表示为

$$
t _ {i} \Rightarrow \bigwedge_ {j} t _ {j} \quad (\text {i f} \quad t t _ {i j} = 1) \tag {4.6}
$$

该式表示测试  $t_i$  为“真”，则推出满足条件  $tt_{ij} = 1$  的测试均为“真”。

（4）矩阵  $TT$  的列表示：该列对应的测试可以“观察”哪些测试，即当该列中“1”元素对应测试有一个异常时，则该列对应的测试输出异常。这种关系可表示为

$$
\rightarrow t _ {i} \Rightarrow \bigwedge_ {k} \rightarrow t _ {k} \quad (\text {i f} \quad t t _ {k i} = 1) \tag {4.7}
$$

该式表示测试  $t_i$  为“假”，则推出满足条件  $tt_{ki} = 1$  的测试均为“假”。

# 2. 生成相关性矩阵的方法

文献[9]给出了一种相关性矩阵生成算法（称为传递闭包和逻辑闭包算法），该算法先由信息流模型得到一阶的  $FT$  矩阵，再通过矩阵逻辑运算得到全阶的  $FT$ ，最后计算得到  $TT$  矩阵。为了提高系统可靠性，系统中一些关键单元往往会采取冗余设计，当一个冗余单元发生故障时，另一个冗余单元仍能正常工作，不会影响整个系统的功能，冗余系统的故障传播比较特殊，该算法采用的逻辑运算没有考虑这种特殊性，所以不能对冗余系统进行运算。

文献[1]给了一种相关性矩阵生成算法（dependency matrix generation algorithm）。该算法是一种基于图形搜索的算法，对于冗余系统同样适用。因此本小节重点介绍该算法。首先定义以下基本元素：

（1）  $m$  维的故障节点集  $F$  
（2）  $n$  维的测试节点集  $T$  
（3）  $K$  维的与节点集  $A$  。

对于节点  $a_{k}$  定义一个容错属性参数，记为  $M_{k} / N_{k}$ ，表示当指向  $a_{k}$  的全部  $N_{k}$  个输入中至少  $M_{k}$  个输入有故障，才会激活  $a_{k}$ ，并将故障传播到  $a_{k}$  的输出端。

相关性矩阵生成算法伪代码如下：

//生成故障-测试，故障-与节点，故障-故障相关性矩阵//

Algorithm: Dependency Matrix Generation  
```txt
DO for each failure source  $f_{i}$  ,   
Invoke Reachability_Analysis (  $f_{i}$  ,DG,reach_vector);   
DO for  $j = 1$  to n   
 $ft_{ij} =$  reach_vector[  $t_j]$    
END   
DO for  $k = 1$  to  $K$    
DO for  $l = 1$  to z   
 $\mathsf{fa}_{ik(1)} = \mathsf{reach\_vector}[a_{k(1)}]$
```

```txt
END  
DO for each successor of  $a_{k}$  ,say  $h_j$  ， $f a_{i k(0)} = f a_{i k(0)}\oplus$  reach_vector  $[h_j]$  ：  
END  
END  
DO for  $j = 1$  to m $ff_{ij} =$  reach_vector[  $f_j]$  ，  
END  
//生成与节点-测试，与节点-与节点，与节点-故障相关性矩阵//  
DO for each AND node  $a_i$  ，InvokeReachability_Analysis(  $a_i$  ,DG,reach_vector);  
DO for  $j = 1$  to n $at_{ij} =$  reach_vector[  $t_j]$    
END  
DO for  $k = 1$  to K  
DO for  $l = 1$  to z $aa_{ik(1)} =$  reach_vector[  $a_{k(1)}]$  ，  
END  
DO for each successor of  $a_k$  ,say  $h_j$  ， $aa_{ik(0)} = aa_{ik(0)}\oplus$  reach_vector[  $h_j]$  ：  
END  
END  
DO for  $j = 1$  to m $af_{ij} =$  reach_vector[  $f_j]$    
END
```

相关性矩阵生成算法中要调用一种可达性分析算法（reachability analysis algorithm）。可达性分析算法主要是搜索出任意给定节点通过有向边所到达的全部节点，并做出相应的标记。该算法通过一个令牌标记从某个给定节点出发，沿着有向边搜索所能达到的全部节点。当令牌到达一个故障节点或一个测试节点，就将该节点的状态标记为1(这些节点的初始状态标记为0)，再由该节点为起点搜索下一个可以到达的节点。当令牌遇到一个具有  $M_{k} / N_{k}$  容错属性的与节点时，统计令牌到达该与节点的次数，当次数等于  $M_{k}$  时，将该与节点的状态标记为1（初始状态为-1）。当令牌遇到系统回路时，为了防止算法陷入死循环，规定令牌不再被复制，并且不能被传播到一个令牌已到达过的节点。当令牌不再被传播到一个新的节点时，算法结束。可达性分析算法伪代码如下：

Algorithm: Reachability_Analysis (source_node, DG, reach_vector)

输入：source_node，DG,reach_vector.

初始化：

（1）将所有与节点状态设为  $-1$  
(2) 将所有源节点 (source_node) 状态设为 1.  
（3）将其他节点状态设为0.  
（4）将要计算的节点集合记为  $SP = \{source\_node\}$ 。

DO

Step1：调用函数 Sub_reachability(SP,reach_vector).

Step2：调用函数Update_AND_node_states(SP,reach_vector)

WHILE  $(SP\neq \emptyset)$

Sub_reachability(SP,reach_vector)

```txt
DO for all  $\{h_i\} \in SP$  DO for each successor of  $h_i$  ,say  $h_j$  IF reach_vector  $[h_j] = 0$  ,THEN reach_vector  $[h_j] = 1$ $SP\leftarrow SP\bigcup \{h_j\}$  END END  $SP\gets SP - \{h_i\}$  END
```

Update_AND_node_states(SP,reach_vector)

```latex
DO for each AND node  $a_{k}$   
IF reach_vector  $[a_{k}] = -1$   
counter=0,  
DO for each input of AND node  $a_{k}$ , i.e.,  $a_{k(1)}$ ,  
IF reach_vector  $[a_{k(1)}] = 1$   
counter← counter+1,  
END  
END  
IF counter≥  $u_{k}$ , THEN  
reach_vector  $[a_{k}] = 1$   
SP← SPU{  $a_{k}$ }  
END  
END
```

# 3. 建模范例

案例6 反坦克导弹发射系统[9]。

某反坦克导弹发射系统由三脚架、炮手光学瞄准镜、发射管、移动单元、电子制导计算机等构成。导弹包括两台固体燃料发动机，发射引擎将导弹弹出发射管，并在导弹出管后烧毁；当导弹飞行数米后飞行引擎开始点火。当导弹离开发射管后，一个光源从导弹尾部发出，应用光学传感器可以跟踪导弹飞行路径。首先建立信息流模型，如图4.26所示，表4.12和表4.13分别给出了建立信息流模型的故障信息和测试信息。

表 4.12 反坦克导弹发射系统故障信息  

<table><tr><td>故障</td><td>编号*</td><td>故障率</td><td>可更换单元**</td></tr><tr><td>开火指令信号</td><td>int1</td><td>10</td><td>-</td></tr><tr><td>标尺位置跟踪器</td><td>int2</td><td>10</td><td>-</td></tr><tr><td>指令超越</td><td>inu1</td><td>10</td><td>-</td></tr><tr><td>超越使能</td><td>inu2</td><td>10</td><td>-</td></tr><tr><td>瞄准激活功能</td><td>M1</td><td>5</td><td>组件1(RU1)</td></tr><tr><td>安全/臂决定</td><td>M2</td><td>5</td><td>组件2(RU2)</td></tr><tr><td>发射器就绪鉴别器</td><td>M3</td><td>100</td><td>组件1(RU1)</td></tr><tr><td>边界检查</td><td>M4</td><td>100</td><td>组件3(RU3)</td></tr><tr><td>参数精度</td><td>M5</td><td>100</td><td>组件3(RU3)</td></tr><tr><td>参数精度备份</td><td>M6</td><td>100</td><td>组件3(RU3)</td></tr><tr><td>错误鉴别器</td><td>M7</td><td>5</td><td>组件4(RU4)</td></tr><tr><td>错误纠正器</td><td>M8</td><td>5</td><td>组件4(RU4)</td></tr><tr><td>指令信号鉴别器</td><td>M9</td><td>5</td><td>组件5(RU5)</td></tr><tr><td>响应生成器</td><td>M10</td><td>5</td><td>组件5(RU5)</td></tr><tr><td>目标跟踪器</td><td>M11</td><td>5</td><td>组件5(RU5)</td></tr><tr><td>指令与跟踪比较器</td><td>M12</td><td>5</td><td>组件6(RU6)</td></tr><tr><td>制导输出</td><td>M13</td><td>5</td><td>组件6(RU6)</td></tr><tr><td>发射器电源(电池)</td><td>M14</td><td>100</td><td>组件6(RU6)</td></tr><tr><td>发射器电源激活</td><td>M15</td><td>100</td><td>组件6(RU6)</td></tr><tr><td>发射器电源信号调节器</td><td>M16</td><td>5</td><td>组件7(RU7)</td></tr><tr><td>交叉检查超越</td><td>M17</td><td>5</td><td>组件7(RU7)</td></tr><tr><td>错误信号边界检查</td><td>M18</td><td>5</td><td>组件8(RU8)</td></tr><tr><td>发射器完全就绪功能</td><td>M19</td><td>5</td><td>组件8(RU8)</td></tr><tr><td>发射指令功能</td><td>M20</td><td>100</td><td>组件8(RU8)</td></tr><tr><td>开火就绪激活功能</td><td>M21</td><td>100</td><td>组件2(RU2)</td></tr></table>

* int 表示可测的输入，包括测试和结论要素；inu 表示不可测的输入；M 表示结论。  
\*\*系统输入可以列入可更换单元组，但此处没有列入。

图4.26 某反坦克导弹发射系统的信息流模型

表 4.13 反坦克导弹发射系统的测试信息  

<table><tr><td>可用测试</td><td>编号*</td><td>时间</td><td>技术级**</td></tr><tr><td>开火指令信号</td><td>int1</td><td>1.00</td><td>E2</td></tr><tr><td>标尺位置跟踪</td><td>int2</td><td>1.00</td><td>E3</td></tr><tr><td>1-2保真度信号</td><td>t1</td><td>2.00</td><td>E3</td></tr><tr><td>准备输出信号</td><td>t2</td><td>2.20</td><td>E3</td></tr><tr><td>边界参数信号</td><td>t3</td><td>2.40</td><td>E5</td></tr><tr><td>概要安全/臂信号</td><td>t4</td><td>1.50</td><td>E4</td></tr><tr><td>联合精度信号</td><td>t5</td><td>1.30</td><td>E4</td></tr><tr><td>错误信号</td><td>t6</td><td>3.00</td><td>E3</td></tr><tr><td>进程纠正信号</td><td>t7</td><td>1.00</td><td>E5</td></tr><tr><td>指令纠正信号</td><td>t8</td><td>2.00</td><td>E3</td></tr><tr><td>指令响应信号</td><td>t9</td><td>0.50</td><td>E4</td></tr><tr><td>跟踪信号</td><td>t10</td><td>0.60</td><td>E6</td></tr><tr><td>电源就位信号</td><td>t11</td><td>0.10</td><td>E7</td></tr><tr><td>电源就位/使能信号</td><td>t12</td><td>0.90</td><td>E2</td></tr><tr><td>有界错误信号</td><td>t13</td><td>1.20</td><td>E3</td></tr><tr><td>发射器使能信号</td><td>t14</td><td>1.60</td><td>E4</td></tr><tr><td>发射跟踪生成器信号</td><td>t15</td><td>1.50</td><td>E2</td></tr><tr><td>发射跟踪评估信号</td><td>t16</td><td>2.00</td><td>E3</td></tr><tr><td>发射器就绪信号</td><td>t17</td><td>1.50</td><td>E3</td></tr><tr><td>稳定回路信号输出</td><td>t18</td><td>0.30</td><td>E3</td></tr></table>

$\mathrm{int}$  表示可测的输入，包括测试和结论要素；  $t$  表示测试。  
**技术级别相当于美国军事服务中的士兵等级，此处假定技术级别和士兵等级呈线性关系。

首先由可达性分析方法得到  $FT$  矩阵，如表4.14所示；再由  $FT$  计算得到  $TT$  矩阵，如表4.15所示。

表 4.14 反坦克导弹发射系统的  $FT$  矩阵  

<table><tr><td>FT</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td><td>t11</td><td>t12</td><td>t13</td><td>t14</td><td>t15</td><td>t16</td><td>t17</td><td>t18</td><td>int1</td><td>int2</td></tr><tr><td>int1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td></td></tr><tr><td>int2</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td></td></tr><tr><td>M1</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>M2</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>M3</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>M4</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>M5</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>M6</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>M7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>M8</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr></table>

续表  

<table><tr><td>FT</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td><td>t11</td><td>t12</td><td>t13</td><td>t14</td><td>t15</td><td>t16</td><td>t17</td><td>t18</td><td>int1</td><td>int2</td></tr><tr><td>M9</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>M10</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>M11</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M12</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M13</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M14</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M15</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M16</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M17</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M18</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M19</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M20</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>M21</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>inu1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>inu2</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>无故障</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table>

表 4.15 反坦克导弹发射系统的  ${TT}$  矩阵  

<table><tr><td>TT</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td><td>t8</td><td>t9</td><td>t10</td><td>t11</td><td>t12</td><td>t13</td><td>t14</td><td>t15</td><td>t16</td><td>t17</td><td>t18</td><td>int1</td><td>int2</td></tr><tr><td>t1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t2</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t3</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t5</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t6</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t8</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t9</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>t10</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t11</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t12</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t13</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t14</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t15</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t16</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t17</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td></td></tr><tr><td>t18</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>int1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr><tr><td>int2</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td></td></tr></table>

# 4.4.3 多信号模型

# 1. 基本理论

在多信号模型中，“信号”泛指一切可以反映故障的征兆，可以是传递函数中的独立变量，也可以是系统的某种性能参数。被测对象中各组成单元的故障被划分为功能性故障(functional failure)和全局故障(general failure)两种类型，分别用符号F和G表示。其中，功能性故障仅影响该单元的正常功能，而不影响其他单元的正常功能；全局故障不仅导致所在单元工作异常，还导致后续单元无法正常运行。全局故障和功能性故障所影响到的“信号”是不同的，这需要经过分析后才能确定。多信号模型也是一种有向图模型，由节点和有向边构成，其中节点包括模块节点、测试节点、与节点和开关节点。

(1) 模块节点 (MODULE node) 表示系统的功能单元, 可以是任何一级的可更换单元。模块的最高层级可以是一个子系统, 最低层级为故障模式, 有时直接把模块视为一个潜在的故障源。  
(2) 测试节点 (TEST node) 表示测量的位置 (物理的或逻辑的)。一个测试点可以有多个测试。  
(3) 有向边(directed arc)用于连接两个模块节点或者模块节点和测试节点，其方向表示各模块之间故障影响传播的方向和测试信息的流动方向。

以上三个部件就可以刻画基本的多信号模型，有时为了进一步刻画一些特殊的地方，引入以下两个部件：

(4) 与节点 (AND node) 用于描述系统冗余特性。冗余系统的特性是, 当冗余模块都发生故障时, 其故障影响才会向后传播到下一个模块。因此引入一个与节点, 将其输入端点分别连接冗余模块, 输出端连接后续模块, 则可描述这种特性。  
(5) 开关节点(SWITCH node)用于改变系统模块的连接方式。一方面可用于反映系统不同的工作模式；另一方面可用于系统诊断时中断反馈回路。

多信号模型通过上述节点刻画出以下信息：

（1）有限的模块集  $M = \{m_1, m_2, \dots, m_l\}$ ，这里模块可以对应于故障模式、元件、部件、可更换单元、SRU、LRU或者子系统等；  
(2）有限的测试点集  $P = \{p_1,p_2,\dots ,p_y\}$  
（3）可以描述模块功能的有限的信号集  $S = \{s_1,s_2,\dots ,s_x\}$  
（4）有限的  $n$  维测试集  $T = \{t_1, t_2, \dots, t_n\}$  
（5）有限的与节点集  $A = \{a_1, a_2, \dots, a_K\}$ ，标记每个与节点  $a_k$  的容错属性  $M_k / N_k$ ；  
(6) 有限的开关节点集  $Z = \{z_{1}, z_{2}, \dots, z_{H}\}$ , 标记每个开关节点  $z_{i}$  的属性（输

入选择型或输出选择型),以及系统不同模式下该与节点的选择方式;

（7）连接各节点的有向边的集合  $E = \{e_{ij}\}$ ，其中  $e_{ij}$  表示由节点  $i$  指向节点  $j$  的有向边；  
(8) 每个测试点  $p_j$  包含的一组测试集  $TP(p_j)$ ,  $TP(p_j) \subseteq T$ ;  
（9）每个测试  $t_j$  检测的一组信号集  $ST(t_j), ST(t_j) \subseteq S$  
（10）每个模块  $m_{i}$  影响的一组信号集  $SM(m_{i})$  ，  $SM(m_{i})\subseteq S$  
(11) 每个模块  $m_{i}$  阻止的一组信号集  $SB(m_{i})$  ，  $SB(m_{i}) \subseteq S$  
（12）每个模块  $m_{i}$  将一组信号集  $SMS_{1}(m_{i})$  转变成另一组信号集  $SMS_{2}(m_{i})$  
（13）每个测试  $t_j$  需要的一组准备工作集合  $OT(t_j)$ ；  
（14）有限的信号组集合  $SG = \{g_1, g_2, \dots, g_w\}$ 。

# 2. 生成相关性矩阵的方法

根据前文介绍，可以知道多信号模型与信息流模型的主要区别在于：①多信号模型中的一条有向边可能包含多个故障信号，这些信号可能是由不同故障节点发出的；②模块的故障类型分为全局故障和功能性故障，全局故障可以沿有向边任意传播，因此可以采用可达性分析算法来获得相关性矩阵，而功能性故障仅具有局部的传播能力，并不能到达有向边连接的全部节点；③多信号模型中的测试可以检测任意传播到该测试所在测点的全局故障，但是对于功能性故障具有选择性。因此对多信号模型进行相关性分析时，需要将全局故障和功能性故障区别对待，还要考虑模块与信号、信号与测试之间的逻辑关系。

令模块  $m_{i}$  包括全局故障  $f_{i\mathrm{G}}$  和功能性故障  $f_{i\mathrm{F}}$  ，在分析之前，首先定义两个矩阵。

（1）模块-测试连接矩阵：  $MT = [mt_{ij}]$  ，描述模块与测试之间的连接关系。若存在一条路径从模块  $m_i$  到达测试  $t_j$  ，则  $mt_{ij} = 1$  ；否则  $mt_{ij} = 0$  。  
直接调用可达性分析算法就可以得到该连接矩阵。  
（2）模块-信号-测试相关性矩阵：  $MST = [mst_{ij}]$ ，描述模块  $m_i$  与测试  $t_j$  之间是否存在公共信号。若  $SM(m_i) \cap ST(t_j) \neq \emptyset$ ，则  $mst_{ij} = 1$ ；否则  $mst_{ij} = 0$ 。

已知传播到  $m_{i}$  的信号集为  $SI(m_{i})$  ，  $m_{i}$  单独影响的信号集为  $SM(m_{i})$  ，  $m_{i}$  阻止的信号集为  $SB(m_{i})$  ，  $m_{i}$  将信号集  $SMS_{1}(m_{i})$  转变成  $SMS_{2}(m_{i})$  ，则在整个系统中  $m_{i}$  影响到的信号集为  $\left[SI(m_i)\bigcup SM(m_i) - SB(m_i)\right]\bigcup SMS_2(m_i) - SMS_1(m_i)$  。由此，依次分析每个模块可向后传播的信号集，已知每个测试检测的信号集，按照定义得到模块-信号-测试相关性矩阵。

下面分别分析全局故障和功能性故障与测试的相关性。

# 1) 全局故障与测试的相关性

全局故障  $f_{iG}$  与  $t_j$  逻辑相关的充要条件为：由模块  $m_i$  出发，至少有一条路径到达  $t_j$  。因此有

$$
f t _ {i (G) j} = m t _ {i j} \tag {4.8}
$$

式中，  $f t_{i(\mathrm{G})j}$  表示  $t_j$  同全局故障  $f_{i\mathrm{G}}$  的相关性。

# 2）功能性故障与测试的相关性

功能性故障  $f_{i\overline{F}}$  与  $t_j$  逻辑相关有两个充要条件为：①由模块  $m_i$  出发，至少有一条路径到达  $t_j$  所在的测点；②模块  $m_i$  影响的信号集  $SM(m_i)$  与测试  $t_j$  可检测的信号集的交集非空，即满足  $SM(m_i) \cap ST(t_j) \neq \emptyset$  。因此有

$$
f t _ {i (\mathrm {F}) j} = m t _ {i j} \times m s t _ {i j} \tag {4.9}
$$

式中，  $f t_{i(\mathrm{F})j}$  表示  $t_j$  同功能性故障  $f_{i\mathrm{F}}$  的相关性，其中“  $\times$  ”表示逻辑乘。

综上所述，由多信号模型获取相关性矩阵的主要步骤如下：

Step1 调用4.4.2节给出的相关性矩阵生成算法得到模块-测试连接矩阵。

Step2 分析各模块影响的信号集以及各测试检测到的信号集，得到模块-信号-测试相关性矩阵。

Step3 根据式(4.8)和式(4.9)得到故障-测试相关性矩阵。

# 3. 建模范例

# 案例7 热水供应系统。

该系统的多信号模型如图4.27所示，包括11个部件：阀门、水箱、水位传感器(LS)、水位控制器(LC)、水管、水泵、流量传感器(FS)、流量控制器(FC)、加热器、温度传感器(TS)和温度控制器(TC)；包括流量  $s_1$  、温度  $s_2$  、水位  $s_3$  三个测量信号；设置6个测点共7个测试，其中  $t_1 \sim t_5$  检测流量，  $t_6$  检测水温，  $t_7$  检测水位。为简化分析，假设每个部件对应一个故障。

图4.27 热水供应系统的多信号模型

测点和相关测试分析如下：

（1）测点  $\mathrm{TP}_{1}$  位于阀和水箱之间，包括测试  $t_1$  ，检测阀门处流量信号，即 $ST(t_{1}) = \{s_{1}\} ;$  
（2）测点  $\mathrm{TP}_2$  位于水箱和管道之间，包括测试  $t_2$  ，检测管道处流量信号，即 $ST(t_{2}) = \left\{s_{1}\right\} ;$

（3）测点  $\mathrm{TP}_3$  位于管道和泵之间，包括测试  $t_3$  ，检测流量信号，即  $ST(t_3) = \{s_1\}$  
（4）测点  $\mathrm{TP}_4$  位于泵和加热器之间，包括测试  $t_4$  ，检测流量信号，即  $ST(t_4) = \{s_1\}$  
（5）测点  $\mathrm{TP}_{5}$  位于加热器外，包括测试  $t_5$  ，检测阀门处流量信号，即  $ST(t_{5}) = \{s_{1}\}$  ，以及测试  $t_6$  ，检测水温信号，即  $ST(t_{6}) = \{s_{2}\}$  
（6）测点  $\mathrm{TP}_{6}$  位于水箱和LS之间，包括测试  $t_7$  ，检测水箱水位信号，即 $ST(t_{7}) = \{s_{3}\}$  。

由此得到该系统的相关性矩阵，如表4.16所示

表 4.16 热水供应系统系统相关性矩阵  

<table><tr><td>\(FT\)</td><td>\(t_1\)</td><td>\(t_2\)</td><td>\(t_3\)</td><td>\(t_4\)</td><td>\(t_5\)</td><td>\(t_6\)</td><td>\(t_7\)</td></tr><tr><td>输入\(1_G\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>输入\(1_F\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td></tr><tr><td>输入\(2_G\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>输入\(2_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>输入\(3_G\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>输入\(3_F\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>输入\(4_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>阀门\(G\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>水箱\(G\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>\(LS_G\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>\(LS_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>\(LC_G\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>\(LC_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>管道\(G\)</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>泵\(G\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(FS_G\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(FS_F\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(FC_G\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(FC_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>加热装置(管道)\(G\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>加热装置(加热部件)\(F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>\(TS_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>\(TC_F\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr></table>

可以对比一下由故障树得到的热水供应系统的相关性矩阵，如表4.2所示。

# 4.4.4 两种经典模型的比较

前面介绍了两种经典的测试性建模方法，下面通过案例对两种模型进行比较。

案例8 滤波放大电路。

某滤波放大电路，如图4.28所示。

图4.28 滤波放大电路  
$S_{1}$  一增益测量；  $S_{2}$  一线性度测量；  $S_{3}$  一截止频率测量；  $S_{4}$  一信号响应速率测量；  $S_{5}$  一直流偏差测量

该电路的信息流模型如图4.29所示，方框中所列为各元件的故障模式。可以看出，信息流模型和电路实际结构产生的偏差是很大的。

图4.29 滤波放大电路的相关性(信息流模型)  
O—开路故障；S—短路故障；T—超差故障；L—线性度故障；G—增益故障；  $T_{1}$  、  $T_{3}$  、  $T_{7}$  —直流测试；  
$T_{2}$  、  $T_{4}$  、  $T_{5}$  —交流测试；  $T_{6}-\mathrm{R}_{1}$  单独测试；  $T_{8}$  、  $T_{9}$  —功率激励

应用可达性分析方法得到相关性矩阵，如表4.17所示。

表 4.17 滤波放大电路的相关性矩阵(信息流模型)  

<table><tr><td>\(FT\)</td><td>\(T_1\)</td><td>\(T_2\)</td><td>\(T_3\)</td><td>\(T_4\)</td><td>\(T_5\)</td><td>\(T_6\)</td><td>\(T_7\)</td><td>\(T_8\)</td><td>\(T_9\)</td></tr><tr><td>\(R_{1O}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{1S}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{1T}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{2O}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{2S}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{2T}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{3O}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{3S}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{3T}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{4O}\)</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(R_{4S}\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(R_{4T}\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(C_{1O}\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(C_{1S}\)</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(C_{1T}\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(A_{1S}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(A_{1G}\)</td><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(A_{1L}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(A_{2S}\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>\(A_{2G}\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(A_{2L}\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr></table>

该电路的多信号模型如图4.30所示。

图4.30 滤波放大器的多信号模型

将各分立元件的故障模式划分为全局故障G和功能性故障F，根据故障影响的信号及其传播特性，分析得到相关性矩阵如表4.18所示。

表 4.18 滤波放大电路的相关性矩阵(多信号模型)  

<table><tr><td rowspan="2">\(FT\)</td><td colspan="4">\(TP_1\)</td><td>\(TP_2\)</td><td colspan="4">\(J_1\)</td><td rowspan="2">\(TP_0\)</td></tr><tr><td>\(S_1\)</td><td>\(S_2\)</td><td>\(S_4\)</td><td>\(S_5\)</td><td>\(S_3\)</td><td>\(S_1\)</td><td>\(S_2\)</td><td>\(S_4\)</td><td>\(S_5\)</td></tr><tr><td>\(R_1(G)\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>\(R_1(F)\)</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>1</td></tr><tr><td>\(R_2(G)\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(R_2(F)\)</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>\(R_3(G)\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(R_3(F)\)</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>\(A_1(G)\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(A_1(F)\)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(R_4(G)\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(R_4(F)\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(C_1(G)\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(C_1(F)\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>\(A_2(G)\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>\(A_2(F)\)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr></table>

# 案例9 盒式磁带录放机。

某盒式磁带录放机由电源、磁头、前置功放、功放、电源指示灯(LED)和三通道（低音、中音和高音）的扬声器系统等构成。磁头有损坏、污染、磁化和偏移四种故障模式；功放有开路和过载两种故障模式；扬声器的三个通道分别具有开路、短路和超差三种故障模式。其中，电源故障、前置功放故障、功放开路、磁头损坏、三个通道的短路都会导致没有声音，电源故障或者电源指示灯故障都会导致指示灯不发光，磁头磁化会导致信号电平低，磁头污染或偏离、高频通道开路都会造成高音音质差或者消音，三个通道的超差、功放过载都会导致扩音时失真，中音通道的开路故障会造成中音音质差。针对上述征兆，对系统设计了7个测试。

该盒式磁带录放机的信息流模型如图4.31所示。

应用可达性分析方法得到相关性矩阵如表4.19所示。

图4.31 磁带录放机的信息流模型

表 4.19 磁带录放机的相关性矩阵 (信息流模型)  

<table><tr><td>FT</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t5</td><td>t6</td><td>t7</td></tr><tr><td>电源</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>LED</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>磁头损坏</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>磁头污染</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>磁头磁化</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>磁头偏移</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>前置功放</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>功放开路</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>功放过载</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>低音通道超差</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>低音通道短路</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>低音通道开路</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>中音通道超差</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>中音通道短路</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>中音通道开路</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>高音通道超差</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>高音通道短路</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>高音通道开路</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table>

该盒式磁带录放机的多信号模型如图4.32所示。

图4.32 磁带录放机的信息流模型

将各模块的故障划分为全局故障和功能性故障，分析每个故障影响的信号以及测试所能观测的信号，得到相关性矩阵如表4.20所示。

表 4.20 磁带录放机的相关性矩阵(多信号模型)  

<table><tr><td rowspan="2">\(FT\)</td><td colspan="2">高音测点</td><td colspan="2">低音测点</td><td>中音测点</td><td rowspan="2">指示灯</td></tr><tr><td>高音</td><td>信噪比</td><td>低音</td><td>失真度</td><td>中音</td></tr><tr><td>电源(G)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><td>LED(G)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>磁头(G)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>磁头(F)</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>前置功放(G)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>功放(G)</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td></tr><tr><td>功放(F)</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>低音通道(G)</td><td>0</td><td>0</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>低音通道(F)</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>中音通道(G)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>中音通道(F)</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>高音通道(G)</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>高音通道(F)</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table>

案例10 双向总线SCSI。

某双向(SCSI)总线系统由一个总线控制器 controller)、3 个独立的总线可访问设备(A-C)以及数据总线构成, 其信息流模型如图 4.33 所示。

图4.33 SCSI总线系统的信息流模型

应用可达性分析方法得到相关性矩阵，如表4.21所示。

表 4.21 SCSI 总线系统的相关性矩阵(信息流模型)  

<table><tr><td>FT</td><td>测试A</td><td>测试B</td><td>测试C</td></tr><tr><td>控制器故障</td><td>1</td><td>1</td><td>1</td></tr><tr><td>总线故障</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备A总线悬挂</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备A通信错误</td><td>1</td><td>0</td><td>0</td></tr><tr><td>设备B总线悬挂</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备B通信错误</td><td>0</td><td>1</td><td>0</td></tr><tr><td>设备C总线悬挂</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备C通信错误</td><td>0</td><td>0</td><td>1</td></tr></table>

将各模块的故障划分为全局故障和功能性故障。在正常操作模式下，控制器一次激活一个设备，并独立于其他设备通过总线与之传输数据。控制器、数据总线、每个设备均包含一个全局故障(G)，当发生全局故障(控制器故障、总线故障、设备总线悬挂)时，整个系统都不能正常通信；控制器与每个设备还各有一个功能性故障(F)，当系统只有控制器发生功能性故障(通信错误)时，它与其他设备的通信中断，而各设备之间的通信正常，当设备A发生全局故障时，设备A与其他设备或与控制器的通信中断。设置3个测点，分别位于3个设备处，对各个设备的通信

进行监测。综上，该总线的多信号模型如图4.34所示。

图4.34 SCSI总线系统的多信号模型

通过分析故障源与测试点的传播关系可以得到相关性矩阵，如表4.22所示。

表 4.22 SCSI 总线系统的相关性矩阵(多信号模型)  

<table><tr><td rowspan="2">\(FT\)</td><td colspan="3">测点</td></tr><tr><td>测试A</td><td>测试B</td><td>测试C</td></tr><tr><td>控制器(G)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>控制器(F)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>总线(G)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备A(G)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备A(F)</td><td>1</td><td>0</td><td>0</td></tr><tr><td>设备B(G)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备B(F)</td><td>0</td><td>1</td><td>0</td></tr><tr><td>设备C(G)</td><td>1</td><td>1</td><td>1</td></tr><tr><td>设备C(F)</td><td>0</td><td>0</td><td>1</td></tr></table>

由前面的对比案例可以看出，信息流模型对组成单元的故障模式的划分更加细致，但是模型与装备功能结构相差较大，所以建模难度较大；多信号模型对故障模式进行了简化，模型与装备功能结构相似，建模难度降低了，但是也损失了一些故障信息。因此二者互有优缺点，工程实践中可根据实际需要选择合适的建模方法和工具。

# 4.5 测试性模型扩展

# 4.5.1 故障要素扩展

对故障属性要素进行描述的基础是FMECA分析，主要包括故障所属单元、

故障定义、故障影响的信号集、故障率、故障严酷度、故障烈度、故障修复时间/费用、故障之间关联性、环境与故障的关联特征等。其中：

（1）故障所属单元FBUnit：说明故障所属模块或元器件，用于故障定位。故障的该属性值可以通过装备系统的FMECA分析得到。  
(2) 故障定义 FMode: 即故障模式, 指故障的表现形式, 如短路、开路、断裂、过度耗损等。结合系统中各单元的功能, 根据 FMECA 方法对系统中的可能发生的故障模式进行分析和定义。  
（3）故障影响的信号集 FSignature：如果一个模块仅有一个故障，那么该模块影响的信号即为该模块故障所影响的信号；如果一个模块有多个故障，那么该模块影响的信号为该模块故障所影响的信号并集。  
（4）故障率 FProbability：根据故障分布函数，包括正态分布、指数分布、对数正态分布和威布尔分布等，确定故障率。故障率属性用每千、百万小时、十亿小时的故障数目进行度量；在不引起歧义的前提下，也可采用平均故障间隔时间(MTBF)来间接表示。故障率是系统故障的一个重要属性，可以从系统的使用数据或现场试验数据中获取，也可从通过可靠性预计获得。  
（5）故障严酷度FCriticality：表示故障最终影响的严重程度等级，可以用故障发生时造成的损失代价来衡量。作为故障的一个本质属性，故障严酷度反映了故障危害程度的大小，一般情况下可以分为I类、II类、III类、IV类等四个等级。在进行系统测试性设计时，往往要求严酷度较高的故障必须能够及时、快速地被检测和隔离，因此故障严酷度对故障注入也有着重要的指导意义。故障严酷度可以通过系统FMECA分析得到。  
(6) 故障烈度 FIntensity: 对于机电产品故障尤为重要, 用于描述故障演化程度。  
（7）故障修复时间/费用 FRTime/FRCost：如果一个模块仅有一个故障，那么该故障的修复时间/费用就是模块修复时间/费用；如果一个模块有多故障，那么模块的修复时间/费用认为是每个故障修复时间/费用的加权平均。  
（8）故障关联性FFCorrelation：主要描述故障之间的因果关系，也从另一个侧面描述了故障的传播特性，包括两个方面：①当前故障模式影响到的故障集，指定影响程度（如果是随机的，可用概率来表示）；②可能影响当前故障的故障集，并指定影响程度。现实中，故障传播的形式多种多样，而且具有不确定性，这使得实际工况下故障传播的真实特性很难在测试性模型中体现出来。  
(9) 环境与故障的关联特性 EFCorrelation: 是指在不同的工作环境中, 系统故障的表现形式、故障率等都会有所不同。这个特性对于故障诊断与测试性验证有重要的意义。

对故障属性进行展开分析，运用关系数据模型来描述故障属性，即可建立一个

多元组的故障属性描述模型，可用FA表示，其中D表示各属性所来自域，具体含义如表4.23所示。

表 4.23 故障关系模型中属性的域  

<table><tr><td>属性</td><td>含义</td><td>域定义D</td></tr><tr><td>故障位置</td><td>系统中的某一功能模块</td><td>50个字符</td></tr><tr><td>故障模式</td><td>故障的表现形式</td><td>50个字符</td></tr><tr><td>故障信号</td><td>故障发生时所影响的信号集</td><td>多维向量,根据对象系统定</td></tr><tr><td>故障概率</td><td>故障发生的统计概率</td><td>5位小数,0.00000~1.00000</td></tr><tr><td>故障严酷度</td><td>故障最终影响的严重程度</td><td>字符,取I、II、III、IV之一</td></tr><tr><td>故障烈度</td><td>描述故障演化程度</td><td>字符,可根据具体故障来划分</td></tr><tr><td>故障修复时间</td><td>故障发生时修复其所属模块所需的时间</td><td>简单数据类型</td></tr><tr><td>故障修复费用</td><td>故障发生时修复其所属模块所需的费用</td><td>简单数据类型</td></tr><tr><td>影响故障集</td><td>故障发生后能够传播或影响到的故障模式的集合</td><td>多维向量,根据对象系统确定</td></tr><tr><td>环境-故障关联关系</td><td>工作环境对故障的影响程度,可用关联因子来定量表达</td><td>多维向量,根据对象系统确定</td></tr></table>

$\mathrm{FA} = (\mathrm{FBUnit}, \mathrm{FMode}, \mathrm{FSignature}, \mathrm{FProbability}, \mathrm{FCriticality}, \mathrm{FIntensity}, \mathrm{FRTime}, \mathrm{FRCost}, \mathrm{FFCorrelation}, \mathrm{EFCorrelation}, \mathrm{D})$

从表4.23可以看出，在故障属性中，前八个可根据系统设计特性以及FMECA分析获得，而后两个属性比较复杂，下面对其进行进一步重点分析。更多的故障建模技术可参阅文献[34]。

# 1. 故障传播特性定量分析

正如前文所述，由于系统各功能单元之间存在复杂的物理连接或逻辑耦联，导致故障之间具有传播性，某一故障发生会影响其他故障的发生。故障传播受限于系统结构层次，总的来讲，有三种基本形式：

（1）发散形式，表示某一模块发生故障后可向多个其他模块进行传播。如图4.35(a)所示，模块A的故障  $f_{\mathrm{A}}$  发生后会传播到模块B、C、D，并诱发其故障  $f_{\mathrm{B}}$  、  $f_{\mathrm{C}}$  、  $f_{\mathrm{D}}$  的发生。  
(2) 汇聚形式, 表示有多个模块的故障都可传播至某一模块, 而且前者任一模块发生故障都会诱发后一模块故障的发生。如图 4.35(b) 所示, 模块 B、C、D 中任一模块对应故障发生都会诱发模块 A 对应故障  $f_{\mathrm{A}}$  的发生。  
(3) 冗余形式, 表示有冗余结构或子系统中的故障传播关系, 也就是所有冗余模块都发生故障的情况下, 会将故障传播到后一模块。如图 4.35(c) 所示, 模块

A、B、C 都发生故障的情况下，才会将故障传播到模块 D、E。

(a)

(b)

(c)  
图4.35 故障传播基本形式

同时，由于系统中各个组件或部件的关键参数以及相互间的连接作用会受外部随机因素干扰，且同一故障在不同时刻发生的故障烈度也会有所不同（即故障的状态不同），直接造成了故障传播具有较强的不确定性。归纳起来，主要表现为两个方面：一是系统中前一模块发生的故障不一定会传播到与它相关联的后继模块；二是在故障的汇聚传播形式中，前面的模块都没有发生故障，只是出现了一定程度的损伤或性能下降，但是在这些模块的综合影响下，后继模块就可能出现故障。

除此之外，在实际系统中还可能存在多故障并发传播的情况，使得故障传播过程更加复杂。如果将每一种故障模式看成一种信号，则故障传播的复杂性和不确定性就可归结为模糊概率信号的传递问题。因此，下面在传统多信号流图模型的基础上，引入模糊概率理论来对模块间故障的影响程度进行分析，进而建立基于模糊概率的多信号流图模型，对故障的传播过程进行描述和定量分析。

在传统多信号流图模型的基础上，为故障模式定义一个约束属性：FState，表示故障模式  $f_{i}$  所处的状态，可用模糊集合  $\mathrm{FS} = \{\text{正常，轻微，一般，严重，致命}\}$  来表征。

对于连接各模块节点的有向边的集合  $E = \{e_{ij}\} \left(1\leqslant i,j\leqslant M\right)$ ，元素  $e_{ij}$  表示由节点  $i$  指向节点  $j$  的有向边，它包含两层含义：一是表示模块间的物理连接或逻辑耦联；二是表示模块间故障或信号的传播关系。因此，可为有向边定义两个属性，分别为EInfluence、EBelief，其中：① EInfluence  $(f_i,f_j)$  表示故障模式  $f_{i}$  发生后对故障模式  $f_{j}$  的影响程度，它除了与模块间的物理或逻辑关联强度有关外，还受故障  $f_{i}$  的故障状态以及外界随机干扰等影响。用概率的形式可表示为  $0\leqslant$

$\operatorname{EInfluence}(f_i, f_j) \leqslant 1$ ，特别的，当  $\operatorname{EInfluence}(f_i, f_j) = 0$  时，表示故障  $f_i$  与  $f_j$  之间不存在关联关系，而  $\operatorname{EInfluence}(f_i, f_j) = 1$  表示故障  $f_i$  与  $f_j$  完全关联。② EBelief  $(f_i, f_j)$ ，表示故障模式  $f_i, f_j$  之间存在故障传播置信度，可根据故障  $f_i$  的发生概率和故障  $f_i, f_j$  之间的影响程度来表示，即  $\operatorname{EBelief}(f_i, f_j) = \operatorname{FProbability}(f_i) \times \operatorname{EInfluence}(f_i, f_j)$ 。

至此，就可以将传统的多信号流图模型进行扩展，建立模糊概率多信号流图模型。下面对模糊概率多信号流图模型中的故障状态和故障间的影响程度等信息进行详细分析。

# 1）故障状态

故障状态 FState 由集合 FS = {正常, 轻微, 一般, 严重, 致命} 来表示, 其中具体的故障状态需要根据故障的信号或征兆来确定。由于该故障状态是一个模糊的概念, 一般不能由一个确定的度量值来刻画, 在工程上可采用一定的模糊区间来描述。因此, 本节引入模糊集的理论, 利用隶属度函数来描述故障的状态。下面首先给出模糊集的相关定义[35]。

定义4.1 论域，就是所讨论的问题涉及的对象的全体，它是一个普通集合。在经典集合论中，对于论域  $U$  内的任意一个元素  $x$  与一个集合  $A$  的关系只能是  $x \in A$  或  $x \notin A$  两种情况。所以集合可通过特征函数来描述，并且每个集合都有一个特征函数：

$$
u _ {A} (x) = \left\{ \begin{array}{l l} 1, & x \in A \\ 0, & x \notin A \end{array} \right. \tag {4.10}
$$

函数  $u_{A}(x)$  称为集合  $A$  的特征函数，它刻画了对集合  $A$  的隶属情况，也称为集合  $A$  的隶属度函数，而模糊集合就是根据隶属度函数的概念定义出来的。

定义4.2 论域  $U = \{x\}$  上的模糊子集  $A$  由隶属度函数  $u_{A}(x)$  来表征， $u_{A}(x)$  在闭区间  $[0,1]$  上取值， $u_{A}(x)$  取值的大小反映了  $x$  对模糊集  $A$  的隶属程度。

对于故障状态而言，论域  $U = \{x\}$  就是对故障信号或征兆的度量值，对于模糊集合  $\mathrm{FS} = \{\text{正常}, \text{轻微}, \text{一般}, \text{严重}, \text{致命}\}$  所表示的每一个状态都对应一个隶属度函数，而故障状态的模糊集一般可用三角形隶属度函数进行描述和表征。图4.36为故障模糊状态和其三角隶属度函数示意图， $x$  表示故障信号或征兆的度量，而 $\mathrm{I} \sim \mathrm{V}$  分别对应故障状态模糊集  $\mathrm{FS} = \{\text{正常}, \text{轻微}, \text{一般}, \text{严重}, \text{致命}\}$ ，可通过人机交互获取故障信号或征兆，并进行处理，进而采用图4.36中所示的隶属度函数来确定故障所处的状态。

但对于某些特殊故障，其故障状态的划分就相对简单，如电路的开路故障，其故障状态只分两种状态  $\mathrm{FS} = \{\text{正常}, \text{故障}\}$ ，而把轻微、一般、严重、致命等状态统称为故障状态。

图4.36 故障状态模糊集及其隶属函数示意图

# 2）故障间影响度与传播置信度

故障间影响度 EInfluence 主要由系统中模块间的物理或逻辑关联来决定，除此以外，还受原发故障的故障状态和外界随机因素（包括环境因素、人为因素等）的影响。系统中模块间通过物理连接或逻辑耦联形成故障间的影响度，可以通过故障的机理分析和系统结构层次分析得到，这个故障影响度由领域专家在对系统和故障深入分析的基础上给出。例如，假设给出某一故障模式  $f_{i}$  在不同故障状态下，诱发故障  $f_{j}$  的影响度分别为  $P = (P_{1}, P_{2}, P_{3}, P_{4}, P_{5})$ ，则对于故障  $f_{i}$  出现某一征兆信号  $x$  后诱发故障  $f_{j}$  的影响程度，可表示为

$$
\operatorname {E I n f l u e n c e} \left(f _ {i}, f _ {j}\right) = \sum_ {k = 1} ^ {5} u _ {k} (x) P _ {k} \tag {4.11}
$$

式中，  $u_{k}(x)$  为故障状态模糊集的隶属度函数。

而故障模式  $f_{i}, f_{j}$  之间故障传播的置信度为

$$
\operatorname {E B e l i e f} \left(f _ {i}, f _ {j}\right) = \operatorname {F P r o b a b i l i t y} \left(f _ {i}\right) \cdot \operatorname {E I n f l u e n c e} \left(f _ {i}, f _ {j}\right)
$$

# 2. 环境因素与故障的关联分析

现实系统一般都处于复杂多变的工作环境中，各种环境因素交互作用和影响使其物理、化学、机械以及电气性能不断发生变化，成为诱发系统故障发生的重要原因，直接导致环境因素与系统故障间存在复杂的关联关系。据美国空军对其某沿海基地使用设备的故障调查研究，得出如下结论：设备发生的故障多数是由其恶劣的工作环境所引起的（温度因素占其中的  $40\%$  ，振动因素占  $27\%$  ，湿度因素占 $19\%$  ，沙尘因素占  $6\%$  ，盐雾因素占  $4\%$  ，高度因素占  $2\%$  ，冲击因素占  $2\%$  ，其他因素占  $2\%$  ）。而美军标MIL-STD-810D/E中指出温度因素、振动因素、湿度因素和电应力因素对电子设备的寿命有着巨大影响。因此，在进行系统测试性建模分析过程中，获取导致系统故障的主要环境因素及其关联程度，对于进行故障分析有着重要的指导意义。

# 1）环境因素与故障关联关系的定性分析方法

环境因素与故障的关联关系分析需要大量的故障数据以及相对应的环境因素数据。但是大多数情况下，尤其是对于新研装备或系统，很难获取大量故障数据和环境因素数据。因此，在没有数据样本的情况下，采用定性分析方法来获得环境因素与故障的关联关系就显得十分重要了。

假设通过系统FMECA分析所获得的系统典型故障模式集为  $F = (f_{1}, f_{2}, \dots, f_{m})$ ，而通过系统工作环境分析获得环境因素的集合为  $X = (X_{1}, X_{2}, \dots, X_{n})$ ，各种环境因素出现的相对概率集合为  $P = (p_{1}, p_{2}, \dots, p_{n})$ 。在对故障机理深入分析的基础上，由领域专家根据经验可获取某一故障模式  $f_{i} (1 \leqslant i \leqslant m)$  与系统工作环境中各种环境因素  $X = (X_{1}, X_{2}, \dots, X_{n})$  的相对关联度（也就是各种环境因素对故障模式  $f_{i}$  影响程度的相对值），用以下向量表示：

$$
\boldsymbol {R} _ {i} ^ {\prime} = \left(r _ {i, 1} ^ {\prime}, r _ {i, 2} ^ {\prime}, \dots , r _ {i, n} ^ {\prime}\right) \tag {4.12}
$$

向量元素满足条件  $\sum_{j=1}^{n} r_{i,j}' = 1$ ，即所有环境因素关联度之和为1，也就是说，故障是在各种环境因素的综合影响之下发生的。另外，由于各种环境因素出现的概率是不同的，在分析环境因素与故障的相对关联程度时，需结合环境概率  $P$  和相对关联度  $R_i'$  综合分析，得出环境因素与系统故障的定性关联关系。这里以环境因素概率为权重，采用简单加权分析法进行计算，即

$$
\boldsymbol {R} _ {i} ^ {\prime \prime} = \left\{r _ {i, j} ^ {\prime \prime} \mid r _ {i, j} ^ {\prime \prime} = r _ {i, j} ^ {\prime} p _ {j} \right\} \tag {4.13}
$$

对式(4.13)进行归一化处理，得到的相对关联度为

$$
\boldsymbol {R} _ {i} = \left\{r _ {i, j} \mid r _ {i, j} = r _ {i, j} ^ {\prime} p _ {j} / \sum_ {j = 1} ^ {n} r _ {i, j} ^ {\prime} p _ {j} \right\} \tag {4.14}
$$

在上述计算的基础上，根据  $r_{i,j}(1\leqslant i\leqslant m,1\leqslant j\leqslant n)$  的大小顺序对环境因素 $X = (X_{1},X_{2},\dots ,X_{n})$  进行重新排序，用以表示环境对故障产生影响的大小顺序，即可确定影响故障  $f_{i}(1\leqslant i\leqslant m)$  的主要环境因素。

定义4.3 累积相对关联度是表示系统工作环境中的某几种环境因素综合起来对故障产生影响的关联程度，可表示为

$$
\mathrm {E R} = \sum_ {j = 1} ^ {k _ {i}} r _ {i, j} \tag {4.15}
$$

因此，选取影响系统故障  $f_{i} (1 \leqslant i \leqslant m)$  的主要环境因素的判定准则为：如果  $\sum_{j=1}^{k_i} r_{i,j} \geqslant L_0$ ，那么选取的主要环境因素集合可记为  $X_{i}' = (X_{1}, X_{2}, \dots, X_{k_{i}})$ ，其中  $L_0$  为预先设定的阈值，由领域专家根据系统实际使用情况来确定。同理，可对整个系统故障集  $F$  与环境因素  $X$  相关联的问题进行分析，并获得系统典型故障集与环境因素的关联度矩阵  $R_{n \times m}$  ：

$$
\begin{array}{l} \begin{array}{c c c c} \boldsymbol {X} _ {1} & \boldsymbol {X} _ {2} & \dots & \boldsymbol {X} _ {n} \end{array} \\ \boldsymbol {R} _ {n \times m} = \begin{array}{c} \boldsymbol {f} _ {1} \\ \vdots \\ \boldsymbol {f} _ {m} \end{array} \left[ \begin{array}{c c c c} r _ {1 1} & r _ {1 2} & \dots & r _ {1 n} \\ r _ {2 1} & r _ {2 2} & \dots & r _ {2 n} \\ \vdots & \vdots & & \vdots \\ r _ {m 1} & r _ {m 2} & \dots & r _ {m n} \end{array} \right] \tag {4.16} \\ \end{array}
$$

根据关联度矩阵可以为系统选择所关心的主要环境因素。综上所述，可以得出进行环境因素与故障关联关系分析的具体步骤。

Step1 进行系统的FMECA分析，得到系统典型故障集  $F$ ，同时进行系统工作环境分析，得出工作环境中的典型环境因素  $X$  以及相应环境因素出现的概率  $P$ ；

Step2 进行系统故障机理分析，从故障领域专家信息中得到环境因素对于某一故障  $f_{i}(f_{i} \in F)$  的相对关联度  $R_{i}^{\prime} = (r_{i,1}^{\prime}, r_{i,2}^{\prime}, \dots, r_{i,n}^{\prime})$ ；

Step3 综合考虑各环境因素出现的概率  $P$ ，对 Step2 中相对关联度  $R_{i}^{\prime}$  进行加权计算，并利用式(4.14)归一化得到  $\pmb{R}_{i} = \{r_{i,1}, r_{i,2}, \dots, r_{i,n}\}$ ，并以相对关联度  $r_{i,j}$  的大小来对所有环境因素  $X = (X_{1}, X_{2}, \dots, X_{n})$  进行排序；

Step4 利用式(4.15)计算累积相对关联度，根据判定准则来选取影响故障的主要环境因素  $X_{i}^{\prime} = (X_{1}, X_{2}, \dots, X_{k_{i}})$ ；

Step5 对于  $F$  中的其他故障，重复 Step2～Step4，从而对整个系统典型故障集  $F$  与环境因素  $X$  的关联进行定性分析，得到系统故障集与环境因素的关联度矩阵  $\pmb{R}_{n\times m}$ ，最后选择影响系统故障的主要环境因素。

# 2）环境因素与故障关联关系的定量分析

对系统工作环境与系统故障进行关联分析，仅得到影响故障的主要环境因素是不够的，还应给出定量关联度，而广泛开展故障实验以获取大量环境因素与故障关联的定量数据也是不现实的。针对这个问题，本节采用灰色关联分析方法，以小样本数据为基础，对环境因素在各个等级条件下诱发故障的关联度因子进行定量分析。

对系统故障产生影响的主要环境因素，可以通过一系列的指标来衡量其对故障影响的敏感性。由于系统的工作环境和工作状态不尽相同，而且各种类型的故事模式对各环境指标的敏感程度也不尽相同。因此，首先综合考虑系统所处的真实工作环境以及故障的自身特性，选取系统故障敏感的环境因素指标。在此基础上，按照系统使用中工作环境的变化规律，对进行某种环境因素的每个敏感指标进行等级划分，然后将多指标进行综合而得到该环境因素的等级划分情况，具体过程如下所述。

设某种环境因素  $X_{i}$  选取的关键指标为  $l$  个，根据每个指标的大小将第  $k$  个指标分为  $u_{k}$  个级别  $J(X_{i}^{k})$  ，即

$$
J \left(X _ {i} ^ {k}\right) = \left\{j _ {1} \left(X _ {i} ^ {k}\right), \dots , j _ {2} \left(X _ {i} ^ {k}\right), \dots , j _ {u _ {k}} \left(X _ {i} ^ {k}\right) \right\}, \quad k = 1, 2, \dots , l \tag {4.17}
$$

将环境因素  $X_{i}$  的各指标按级别进行综合，即可得到该环境因素的组合等级划分集合：

$$
J \left(X _ {i}\right) = \left\{j _ {1} \left(X _ {i} ^ {1}\right) j _ {2} \left(X _ {i} ^ {1}\right) \dots j _ {u _ {1}} \left(X _ {i} ^ {1}\right), j _ {1} \left(X _ {i} ^ {2}\right) j _ {2} \left(X _ {i} ^ {2}\right) \dots j _ {u _ {2}} \left(X _ {i} ^ {2}\right), \dots , \right.
$$

$$
j _ {1} \left(X _ {i} ^ {l}\right) j _ {2} \left(X _ {i} ^ {l}\right) \dots j _ {u} \left(X _ {i} ^ {l}\right) \}
$$

接下来，在上述分析基础上，利用灰色关联分析方法进行环境因素与故障的定量关联分析。首先，给出灰色关联度的基本概念。

定义4.4设  $X_{i}$  为系统因素，其在序号  $k$  上的观测数据为  $x_{i}(k)(k = 1,2,\dots ,n)$  ，则称  $X_{i} = (x_{i}(1),x_{i}(2),\dots ,x_{i}(n))$  为因素  $X_{i}$  的行为序列。

若  $k$  为时间序号，则  $X_{i}$  为时间序列， $x_{i}(k)$  为因素  $X_{i}$  在  $k$  时刻的观测数据；若  $k$  为指标序号，则  $X_{i}$  为行为指标序列， $x_{i}(k)$  为因素  $X_{i}$  关于第  $k$  指标的观测数据；若  $k$  为观测对象序号，则  $X_{i}$  为行为横向序列， $x_{i}(k)$  为因素  $X_{i}$  关于第  $k$  对象的观测数据。无论是时间序列数据、指标序列数据还是横向序列数据，都可用于进行关联分析。

定义4.5 设系统主行为为  $Y = (y_{1}, y_{2}, \dots, y_{n})$ ，而系统因素有  $X = \{X_{1}, X_{2}, \dots, X_{m}\}$  且相应的行为序列为  $X_{i} = (x_{i}(1), x_{i}(2), \dots, x_{i}(n))(1 \leqslant i \leqslant m)$ ，对于  $\rho \in (0,1)$ ，令

$$
\gamma (y (k), x _ {i} (k)) = \frac {\min  _ {i} \min  _ {k} | y (k) - x _ {i} (k) | + \rho \max  _ {i} \max  _ {k} | y (k) - x _ {i} (k) |}{| y (k) - x _ {i} (k) | + \rho \max  _ {i} \max  _ {k} | y (k) - x _ {i} (k) |} \tag {4.18}
$$

$$
\gamma (Y, X _ {i}) = \frac {1}{n} \sum_ {k = 1} ^ {n} \gamma (y (k), x _ {i} (k)) \tag {4.19}
$$

则称  $\gamma (Y,X_{i})$  为因素  $X_{i}$  对系统主行为  $Y$  的灰色关联度，而  $\gamma (y(k),x_i(k))$  为因素 $X_{i}$  对系统主行为  $Y$  在  $k$  点的关联系数。

式(4.18)中， $\rho$  为分辨系数，其取值可视具体情况而定，其取值越小分辨力越大，一般情况取  $\rho = 0.5$  。而  $\min_{i} \min_{k} |y(k) - x_{i}(k)|$  称为两级最小差，其中  $\min_{k} |y(k) - x_{i}(k)|$  为一级最小差，表示因素  $X_{i}$  行为序列的各相应点与  $Y$  中各相应点的距离的最小值；而  $\min_{i} \min_{k} |y(k) - x_{i}(k)|$  表示在各因素找出最小差  $\min_{k} |y(k) - x_{i}(k)|$  的基础上，按  $i = 1,2,\dots,m$  找出所有最小差中的最小差。  $\max_{i} \max_{k} |y(k) - x_{i}(k)|$  为两级最大差，意义同两级最小差相类似。

在环境因素等级划分与灰色关联度定义基础上，以某环境因素  $X$  对系统故障  $f$  产生影响为例，对基于灰色关联分析的环境因素与故障的定量关联分析具体过程说明如下。

Step1 根据系统实际工作环境中环境因素  $X$  的变化趋势和变化范围对环境因素  $X$  进行等级分析，选取相应的关键指标并将环境因素  $X$  划分为  $N$  个等级，分别为  $X = \{X_{1}, X_{2}, \dots, X_{N}\}$ 。

Step2 在环境因素  $X$  的某一等级条件  $X_{i}(1 \leqslant i \leqslant N)$  下，对系统加载相应环境进行故障实验  $M$  次，则系统的故障输出数据为  $Y_{i} = (y_{i}(1), y_{i}(2), \dots, y_{i}(M))$ ，其中  $y_{i}(j)(1 \leqslant j \leqslant n)$  等于 1 或 0，表示故障  $f$  发生或没有发生，而相应的环境因素数据为  $X_{i}^{\prime} = (1, 1, \dots, 1)$ ，表示环境因素  $X$  处于相应等级条件下。

Step3针对环境因素  $X$  的各个等级条件，重复进行Step2的内容，获取在不同等级条件下环境因素  $X$  的实验数据。

Step4 将所有的实验数据进行合并处理，将各个等级条件下的故障输出数据  $Y_{i} = (y_{i}(1), y_{i}(2), \dots, y_{i}(M))$  按环境因素等级的顺序合并形成新的故障输出序列  $Y = (Y_{1}, Y_{2}, \dots, Y_{N})$ ，将  $Y$  组合成一个为由 0 或 1 组成的长度为  $N \times M$  的数据序列；另外，各个等级条件下的相应环境因素数据合并为  $X_{i} = (0, \dots, X_{i}', \dots, 0) (1 \leqslant i \leqslant N)$ ，则各个环节因素等级  $X_{i} (1 \leqslant i \leqslant N)$  的行为序列为  $M$  个 1 和  $(N - 1) \times M$  个 0 组成的数据序列。

Step5 选取故障数据序列  $Y = (Y_{1}, Y_{2}, \dots, Y_{N})$  作为参考数列，以某个等级条件下的环境因素数据  $X_{i} = (0, \dots, X_{i}', \dots, 0) (1 \leqslant i \leqslant N)$  作为比较序列，根据式(4.18)和式(4.19)求出环境因素  $X$  在等级  $X_{i}$  下对故障  $f$  的相对关联度  $\gamma(Y, X_{i})$ 。

Step 6 重复进行 Step 4、Step 5 的内容得到环境因素  $X$  在所有等级条件下对故障  $f$  的相对关联度，从而得出环境因素对故障的定量相对关联因子为向量  $\gamma$  ，即

$$
\gamma = \left[ \gamma (Y, X _ {1}), \dots , \gamma (Y, X _ {i}), \dots , \gamma (Y, X _ {N}) \right]
$$

在上述分析的基础上，通过  $\gamma (Y,X_{i})$  的大小比较即可以确定各环境因素不同等级对故障  $f$  的定量影响关系。定量关联度因子  $\gamma$  对测试性分析与验证均具有重要的指导意义。

# 4.5.2 测试要素扩展

测试要素的属性除了测试位置（即测试点）、类型、测试方式、测试级别、测试费用、测试时间、测试优先级、测试模式、用户角色等属性外，还包括测试不确定性。

# 1. 测试不确定性建模

前面介绍的相关性矩阵是布尔矩阵，它是基于测试结果可靠假设条件的，而实际上由于装备复杂的内部结构和外界环境，实际中的测试结果会受到许多干扰源的影响，包括不正确的安装、错误的操作、电磁干扰、环境影响以及固有的测量误差

等，测试结果往往不是百分之百可靠的。

由于测试结果不可靠，导致故障与测试因果关系的不确定性，即测试通过不一定表示系统正常（可能是漏检），而测试不通过不一定表示系统必然有故障（可能是虚警）。为了描述这种故障与测试之间的不确定相关性，本节首先引入故障-测试不确定相关性矩阵，然后给出获取不确定相关性矩阵的方法。

假设所有测试为二值测试，即输出为通过(Pass或GO)或不通过(Fail或NO-GO)，不妨以测试  $t_j$  为例，存在以下四种情形：

(1) 故障  $f_{i}(\in F(t_{j}) = \{f_{i} \in F \mid ft_{ij} = 1\})$  发生时， $t_{j}$  输出为 Fail，则  $t_{j}$  正确指示了故障  $f_{i}$ 。  
(2) 故障  $f_{i}(\in F(t_{j}))$  发生时， $t_{j}$  输出为 Pass，则  $t_{j}$  漏检了故障  $f_{i}$ 。  
（3）系统正常或  $f_{k}(\in \overline{F}(t_{j}) = \{f_{i} \in F | ft_{ij} = 0\})$  发生时， $t_{j}$  输出为 Fail，则  $t_{j}$  的指示为虚警。前者为Ⅱ类虚警，而后者  $t_{j}$  正确指出系统存在故障，但是  $t_{j}$  的指示会导致错误的故障隔离结果，为Ⅰ类虚警。  
（4）系统正常或  $f_{k}(\in \overline{F}(t_{j}))$  发生时， $t_{j}$  输出为 Pass，则  $t_{j}$  指示正确，虽然对于后者  $t_{j}$  没有指出系统存在故障，但是  $t_{j}$  的指示结果不会带来负面影响。

基于上述四种情形，对测试  $t_j$  引入两个不确定参数  $Pd_{ij}$  和  $Pf_j$ ， $Pd_{ij}$  表示  $t_j$  对  $f_i$  的检测概率， $Pf_j$  表示  $t_j$  的虚警概率。分别定义如下：

$$
P d _ {i j} = P \left(t _ {j f} \mid f _ {i}\right), \quad \forall f _ {i} \in F \left(t _ {j}\right) \tag {4.20}
$$

$$
P f _ {j} = P \left(t _ {j f} \mid f _ {k}\right), \quad \forall f _ {k} \in \bar {F} \left(t _ {j}\right) \tag {4.21}
$$

式中，  $Pd_{ij} = P(t_{jf} \mid f_i)$  表示系统仅有故障  $f_i (\in F(t_j))$  发生时，测试  $t_j$  正确报警的概率，即对该故障的检测概率；  $Pf_j = P(t_{jf} \mid f_k)$  则表示系统仅有故障  $f_k (\in \overline{F}(t_j))$  发生时，测试  $t_j$  错误报警的概率，即虚警概率。

根据不确定参数的定义，任意测试  $t_j$  的不确定参数有以下特点：

（1）若测试  $t_j$  与故障  $f_{i}$  不相关（即  $f t_{ij} = 0$ ），则必然有  $P d_{ij} = 0$ 。  
（2）测试  $t_j$  的不确定参数满足： $Pd_{ij} \gg Pf_j, \forall f_i \in F(t_j)$ 。这说明  $t_j$  对逻辑相关故障的检测概率必然远大于该测试的虚警概率，否则与实际不符。  
(3) 若  $f_{i}$  与  $t_{j}$  和  $t_{k}$  都相关（即  $ft_{ij}, ft_{ik} \neq 0$ ），且  $f_{i}$  与  $t_{j}$  的相关阶数比它与  $t_{k}$  的相关阶数小，则  $Pd_{ij} \geqslant Pd_{ik}$ 。这说明任何故障被直接测试（低阶相关的测试）检测的概率要大于被间接测试（高阶相关的测试）检测的概率。

可见，不确定参数同故障-测试相关性矩阵有密切的关系，因此将二者结合起来，定义一个不确定相关性矩阵，记为  $D$  ，其元素定义为

$$
d _ {i j} = P \left(t _ {j f} \mid f _ {i}\right) = f t _ {i j} P d _ {i j} + \left(1 - f t _ {i j}\right) P f _ {j} \tag {4.22}
$$

式中，  $d_{ij}$  为  $f_{i}$  与  $t_j$  的不确定相关性，它既包括了正确报警的概率，又包括了虚警的概率。

要得到不确定相关性矩阵，需要先获得不确定性参数。在分析测试  $t_j$  的不确

定性参数时，要分析  $\mid \mathrm{TS}(t_j)\mid$  个检测概率和一个虚警概率，可以采用直接法和间接法。所谓直接法是指通过统计试验的方法获得不确定相关参数，往系统中注入任意一个与  $t_j$  逻辑相关的故障，如  $f_{i}$  ，然后将  $t_j$  重复执行  $N$  次，统计不通过的次数  $n$  ，则  $t_j$  对  $f_{i}$  的检测概率  $Pd_{ij}\approx n / N$  ；在系统正常状态下，将测试  $t_j$  重复执行 $N$  次，统计不通过的次数  $m$  ，则  $t_j$  的虚警概率为  $Pf_{j}\approx m / N$  。显然直接法需要大量的样本数据，数据少则难以获得较准确的评估结果。对此，本节提出一种间接法，该方法不是直接统计若干次测试结果中的报警次数，而是先分析某故障状态下，测试观测值的概率密度函数，将该概率密度函数同预先设定的容差(门限)相比来得到不确定参数。该方法的基本流程如图4.37所示。该方法首先基于小子样理论估计系统各故障状态下测试观测值的分布函数，然后基于测试容差理论估计一阶的故障检测概率和虚警概率，最后基于故障传播特性，采用最小最大方法得到系统不确定相关性矩阵。

图4.37 获取系统不确定相关性矩阵的流程图

小子样试验方法是一种基于贝叶斯理论的统计推断方法，该方法充分利用客观存在但通常被人们所忽视的验前信息，并根据试验获得的观测数据进行条件分析和推断。这样，在相同的置信度条件下，所需样本数目大大减少，从而缩短试验周期、降低试验成本，获得较高的效费比。目前该方法被广泛地应用于装备可靠性试验和装备效能试验以及测试性验证。

引理4.1[36] 根据中心极限定理和随机误差的性质可知，在多数情况下，随机误差服从正态分布。

此外，在贝叶斯统计推断理论中，有以下基本定理：

定理4.1[37] 正态分布总体参数  $\left[\mu, \sigma^2\right]$  的联合共轭分布是正态-逆Gamma分布。记  $\left[\mu, \sigma^2\right]$  的验前分布为正态-逆Gamma分布  $\left[\mu, \sigma^2\right] \sim N - IGA\left(\nu_1, \mu_1, \sigma_1^2, k_1\right)$ ，则验后分布为  $\left[\mu, \sigma^2 \mid X\right] \sim N - IGA\left(\nu_1, \mu_1, \sigma_1^2, k_1\right)$ 。

首先，根据引理4.1可知观测值的总体分布为正态分布，不妨令在系统某个状态下测试  $t_j$  的观测值  $x_j$  服从正态分布，即  $x_j \sim N[\mu, \sigma^2]$ 。一般的，认为  $\mu$  和  $\sigma^2$  均为未知参数。根据定理4.1可知， $[\mu, \sigma^2]$  的联合共轭验前分布是正态-逆Gamma分布，即  $[\mu, \sigma^2] \sim N - IGA[\nu_\kappa, \mu_\kappa, \sigma_\pi^2, k_\pi]$ ，其中  $\nu_\kappa, \mu_\kappa, \sigma_\pi^2, k_\pi$  为未知参数，利用验前矩来确定。具体步骤如下：

Step1 对已获取的验前信息运用Bootstrap法求出均值差  $\mu$  的验前均值  $\bar{\mu}$  和验前方差  $S_{\mu}^{2}$  ；同理，求出方差  $\sigma^2$  的验前均值  $\bar{\sigma}^2$  和验前方差  $S_{\sigma^2}^2$  。

Step2 令  $\mu$  的验前均值和方差分别等于  $\mu$  验前分布的期望和方差；再令  $\sigma^2$  的验前均值和方差分别等于  $\sigma^2$  验前分布的期望和方差，于是有

$$
\left\{ \begin{array}{l l} \mu_ {\pi} = \bar {\mu}, & k _ {\pi} = \frac {\bar {\sigma} ^ {2}}{S _ {\mu} ^ {2}} \\ \nu_ {\pi} = \frac {2 (\bar {\sigma} ^ {2}) ^ {2}}{S _ {\mu} ^ {2}} + 4, & \beta_ {\pi} = \frac {\nu_ {\pi} - 2}{\nu_ {\pi}} \bar {\sigma} ^ {- 2} \end{array} \right. \tag {4.23}
$$

Step3 根据定理4.1可知， $\{\mu, \sigma^2\}$  的验后分布  $(\mu, \sigma^2 \mid X)$  也服从正态-逆Gamma分布，即  $(\mu, \sigma^2 \mid X) \sim N - IGA[\nu_1, \mu_1, \sigma_1^2, k_1]$ ，其中

$$
\left\{ \begin{array}{l} \mu_ {1} = \frac {k _ {\pi}}{k _ {\pi} + n} \mu_ {\pi} + \frac {n}{k _ {\pi} + n} \bar {X} \\ v _ {1} = v _ {\pi} + n \\ \sigma_ {1} ^ {2} = \frac {1}{v _ {1}} \left[ v _ {\pi} \sigma_ {\pi} ^ {2} + n S ^ {2} + \frac {k _ {\pi} n}{k _ {\pi} + n} \left(\mu_ {\pi} - \bar {X}\right) ^ {2} \right] \\ k _ {1} = k _ {\pi} + n \end{array} \right. \tag {4.24}
$$

Step4 取损失函数为平方误差函数即  $(\mu - \hat{\mu})^2$ ，于是得到  $\mu$  的贝叶斯点估计：

$$
\hat {\mu} _ {E} = E (\mu \mid X) = \mu_ {4} \tag {4.25}
$$

同理，取得到  $\sigma^2$  的验后期望估计为

$$
\hat {\sigma} _ {E} ^ {2} = E \left(\sigma^ {2} \mid X\right) = \frac {\nu_ {1} \sigma_ {1} ^ {2}}{\nu_ {1} - 2} \tag {4.26}
$$

特别的，验前信息对于小子样评估是非常重要的，这些信息可通过对新老装备的类比、同类测试的借鉴获取，也可以通过仿真试验获得。

一旦估计出某测试在系统某状态下观测值的分布函数，则进一步根据测试容差理论来估计该测试的不确定参数。

判断观测值是否正常时，需要先设定容差，不妨将容差设定为  $(\chi_1, \chi_2)$  。规定  $\chi_1 \leqslant x_j \leqslant \chi_2$  时判断观测值  $x_j$  为正常，否则判断观测值为异常。于是，测试  $t_j$  的虚警概率即为  $x_j$  的分布函数落在容差范围之外的面积，如图4.38(a)所示，则虚警概率可由下式计算：

$$
P f _ {j} = 1 - P \left(\gamma_ {1} \leqslant x _ {j} \leqslant \gamma_ {2}\right) = 1 - \left[ \Phi \left(\frac {\gamma_ {2} - \mu_ {j}}{\sigma_ {j}}\right) - \Phi \left(\frac {\gamma_ {1} - \mu_ {j}}{\sigma_ {j}}\right) \right] \tag {4.27}
$$

(a) 虚警概率示意图

(b) 漏检概率示意图  
图4.38 测试虚警概率与漏检概率的示意图

同理，假设系统发生故障  $f_{i}$ ，且该故障与  $t_j$  逻辑相关，测试  $t_j$  的观测值  $x_{j}$  服从另一个正态分布，其概率密度函数记为

$$
f _ {i} \left(x _ {j}\right) = \frac {1}{\sqrt {2 \pi \sigma_ {i j} ^ {2}}} \exp \left\{\frac {\left(x _ {j} - \mu_ {i j}\right) ^ {2}}{2 \sigma_ {i j} ^ {2}} \right\} \tag {4.28}
$$

于是， $t_j$  对  $f_i$  的检测概率即为  $x_j$  的分布函数落在容差范围之外的面积，而漏检概率为容差范围之内的面积，如图4.38(b)所示，则检测概率可由下式计算：

$$
P d _ {i j} = 1 - P \left(\chi_ {1} \leqslant x _ {j} \leqslant \chi_ {2}\right) = 1 - \left[ \Phi \left\{\frac {\chi_ {2} - \mu_ {i j}}{\sigma_ {i j}} \right\} - \Phi \left\{\frac {\chi_ {1} - \mu_ {i j}}{\sigma_ {i j}} \right\} \right] \tag {4.29}
$$

式(4.27)和式(4.29)中，函数  $\Phi (\cdot)$  可以查阅正态分布表得到。

一旦给定在不同状态下某测试观测值的概率密度函数以及容差，就可以根据式(4.27)和式(4.29)计算得到相应的不确定参数。

案例11 某战车自动变速箱控制电路。

某战车自动变速箱控制电路采用  $26.5\sim 28.5\mathrm{V}$  的直流电源，包括工作电路和保护电路。电源供电主要分两条线路，一条线路通过节点118给安全保护电路供电。安全保护电路的主要功能有：行驶状态互锁、档位互锁和限速保护。行驶状态互锁是指对战车的前进和后退两个行驶状态之间进行互锁；档位互锁是指当战车行驶在某个档位时，对其他档位进行锁定。该功能主要通过一组继电器来实现。另一条供电线路则是通过节点119给正常工作电路供电，经过行驶状态控制电路和档位控制电路，选择所需的行驶状态和档位，通过液力变矩器控制变速箱，使变速箱正常工作。当节点118断电，而节点119有电时，变速箱仍然能够工作，但是已经失去了安全保护。当节点119断电时，变速箱控制电路则不能正常工作。该电路的信息流模型如图4.39所示。

图4.39 某战车自动变速箱控制电路的信息流模型

对节点118的观测结果进行不确定参数估计。首先在直流电源正常供电的情况下，分时间段测得16组数据：

$$
2 6. 6 3 \quad 2 6. 1 1 \quad 2 8. 2 7 \quad 2 6. 9 4 \quad 2 6. 4 3 \quad 2 7. 6 5 \quad 2 7. 1 8 \quad 2 5. 8 0
$$

$$
2 6. 8 3 \quad 2 7. 0 5 \quad 2 7. 5 9 \quad 2 5. 8 8 \quad 2 7. 6 8 \quad 2 6. 1 1 \quad 2 7. 1 0 \quad 2 7. 1 5
$$

不妨取前8个数据作为“历史数据”，取后8个数据作为“实际数据”。首先根据前面给出的计算步骤得到  $(\mu, \sigma^2)$  的贝叶斯小子样估计  $\hat{\mu}_E = 26.90, \hat{\sigma}_E^2 = 0.52$ 。

根据电路的设计规范，整个电路在正常时，节点118的门限值为  $2\hat{\sigma}_{E} = 1.44$  即容差为  $(\chi_{1},\chi_{2}) = (26.9 - 1.44,26.9 + 1.44) = (24.46,28.34)$  。再由式(4.27）可得在节点118发生虚警的概率为  $Pf_{118} = 1 - P(\chi_1\leqslant x_j\leqslant \chi_2) = 1 - 0.9545 =$  0.0455。

由于这16个数据都在正常容差范围内，所以采用直接法得到节点118处的虚警概率为  $0\%$  ，这个结果显然是不符合实际的。

采用同样的方法，可以得到其他各测试节点在电路正常条件下的虚警概率，以及各模块在故障时各节点的检测概率，这里不再赘述。

由于故障影响在系统中会根据系统拓扑结构和信号走向进行传播，这使得故障既可以被与之一阶相关的测试检测到，也可以被其他高阶相关测试间接检测到。因此，可以由一阶检测概率通过递推法则得到高阶的检测概率。

串联系统和并联系统是系统相关性模型的基本构成模式，下面分别开展讨论。

# 1）串联系统

由相关性的定义可知  $(f_{1},t_{1})$  、  $(f_{2},t_{2})$  、  $(f_{3},t_{3})$  和  $(f_{4},t_{4})$  是一阶相关， $(f_{1},t_{2})$  、  $(f_{2},t_{3})$  和  $(f_{3},t_{4})$  是二阶相关， $(f_{1},t_{3})$  和  $(f_{2},t_{4})$  是三阶相关， $(f_{1},t_{4})$  是四阶相关。首先应用贝叶斯方法获得一阶检测概率（ $Pd_{11}$  、  $Pd_{22}$  、  $Pd_{33}$  、  $Pd_{44}$  ），再通过推理近似获取高阶检测概率（ $Pd_{12}$  、  $Pd_{13}$  、  $Pd_{14}$  、  $Pd_{23}$  、  $Pd_{24}$  、  $Pd_{34}$  ）。图4.40为串联系统的相关性模型， $f_{1}$  被  $t_{2}$  间接检测。考虑到故障  $f_{1}$  的特征信号在向后的传播过程会有一定的损失，因此高阶的检测概率必然小于低阶的检测概率，即有  $Pd_{12} < Pd_{11}$ ， $Pd_{22}$ ，所以  $Pd_{12}$  用比之低一阶的检测概率取极小运算得到，即令  $Pd_{12} = \min\{Pd_{11}, Pd_{22}\}$ ，同理有  $Pd_{23} = \min\{Pd_{22}, Pd_{33}\}$ ， $Pd_{34} = \min\{Pd_{33}, Pd_{44}\}$ ， $Pd_{13} = \min\{Pd_{12}, Pd_{23}\}$ ， $Pd_{24} = \min\{Pd_{23}, Pd_{34}\}$ ， $Pd_{14} = \min\{Pd_{13}, Pd_{24}\}$ 。

图4.40 某简单串联系统的信息流模型

已知各测试的一阶检测概率分别为：  $Pd_{11} = 0.8$  、  $Pd_{22} = 0.85$  、  $Pd_{33} = 0.9$  和  $Pd_{44} = 0.85$ ，虚警概率为  $Pf_{1} = Pf_{2} = Pf_{3} = Pf_{4} = 0.001$  。根据极小运算近似依次得到各阶检测概率，再根据式(4.22)得到不确定相关性矩阵，如表4.24所示。

表 4.24 简单串联系统的不确定相关性矩阵  

<table><tr><td rowspan="2">故障</td><td colspan="4">相关阶数</td><td colspan="4">不确定相关性矩阵</td></tr><tr><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td></tr><tr><td>f1</td><td>1</td><td>2</td><td>3</td><td>4</td><td>0.80</td><td>0.80</td><td>0.80</td><td>0.80</td></tr><tr><td>f2</td><td>0</td><td>1</td><td>2</td><td>3</td><td>0.001</td><td>0.85</td><td>0.85</td><td>0.85</td></tr><tr><td>f3</td><td>0</td><td>0</td><td>1</td><td>2</td><td>0.001</td><td>0.001</td><td>0.90</td><td>0.85</td></tr><tr><td>f4</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0.001</td><td>0.001</td><td>0.001</td><td>0.85</td></tr></table>

# 2）并联系统

图4.41中  $f_{1}$  可以通过两条路径传播到  $t_1$  ，所以先采用极小运算分别得到串

联部分的高阶检测概率，再对并联部分采用极大运算。  $t_4$  通过路径  $f_1 \rightarrow f_2 \rightarrow f_4 \rightarrow t_4$  对  $f_1$  的检测概率为  $Pd_{14}^1 = \min \{Pd_{12}, Pd_{24}\}$ ；同理，  $t_4$  通过路径  $f_1 \rightarrow f_3 \rightarrow f_4 \rightarrow t_4$  对  $f_1$  的检测概率为  $Pd_{14}^2 = \min \{Pd_{13}, Pd_{34}\}$ 。然后，对这两个检测概率采用极大运算，得到  $t_4$  对  $f_1$  的检测概率为  $Pd_{14} = \max \{Pd_{14}^1, Pd_{14}^2\}$ 。

图4.41 某简单并联系统的信息流模型

已知全部一阶检测概率分别为：  $Pd_{11} = 0.9$  、  $Pd_{22} = 0.85$  、  $Pd_{33} = 0.80$  和  $Pd_{44} = 0.95$ ，虚警概率为  $Pf_{1} = Pf_{2} = Pf_{3} = Pf_{4} = 0.001$  。运用极小极大运算依次得到各阶检测概率，进而得到不确定相关性矩阵，如表4.25所示。

表 4.25 简单并联系统的不确定相关性矩阵  

<table><tr><td rowspan="2">故障</td><td colspan="4">相关阶数</td><td colspan="4">不确定相关性矩阵</td></tr><tr><td>t1</td><td>t2</td><td>t3</td><td>t4</td><td>t1</td><td>t2</td><td>t3</td><td>t4</td></tr><tr><td>f1</td><td>1</td><td>2</td><td>2</td><td>3</td><td>0.90</td><td>0.85</td><td>0.80</td><td>0.85</td></tr><tr><td>f2</td><td>0</td><td>1</td><td>0</td><td>2</td><td>0.001</td><td>0.85</td><td>0.001</td><td>0.85</td></tr><tr><td>f3</td><td>0</td><td>0</td><td>1</td><td>2</td><td>0.001</td><td>0.001</td><td>0.80</td><td>0.80</td></tr><tr><td>f4</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0.001</td><td>0.001</td><td>0.001</td><td>0.95</td></tr></table>

综上所述，采用故障与测试的条件概率来描述测试结果的不确定性，针对样本数据少的特点，应用小子样技术获得较为可信的不确定性参数；基于故障传播过程中的基本特点，采用极小极大原则来由低阶的不确定参数递推得到高阶的不确定参数。这种方法相比直接统计法需要的样本数据少，而且计算结果可信度较高。

# 2. 多值测试建模

一般情况下，相关性模型所定义的测试均是二值测试（binary test）的，只有通过和不通过两种输出，因此所描述的系统状态信息有限。二值测试是一种简化假设，实际中有很多测试具有多值输出，称为多值测试（multivalued test）。模拟信号的测试一般都是多值测试，如机电系统的振动信号测试，不同的特征频谱带对应于不同的系统状态，因此多值测试可以获得更多的系统状态信息。多值输出测试必须在测试的属性中予以说明，下面举例说明。

案例12 某串联电缆。

图4.42为一个串联电缆线的多信号模型。

图4.42 串联电缆线的多信号流图模型

这是一个串联电缆的多信号流图模型，两段电缆的电阻值均为  $5\sim 10\Omega$  。模型中定义4个故障模式，分别是电缆1短路和开路以及电缆2短路和开路，设置2个测试  $t_1$  和  $t_2$  ，分别测量电缆1和电缆2串联电阻以及电缆1的电阻。规定若  $t_1$  测得电阻值小于  $10\Omega$  ，则可断定电缆1或电缆2短路，若测得电阻值大于  $20\Omega$  ，则可断定电缆1或电缆2开路，若测得电阻值介于  $10\sim 20\Omega$  ，则可断定两段电缆正常；同理，若  $t_2$  测得电阻值小于  $5\Omega$  ，则可断定电缆1短路，若测得电阻值大于  $10\Omega$  ，则可断定电缆1开路，若测得电阻值介于  $5\sim 10\Omega$  ，则可断定电缆1正常。因此  $t_1$  和 $t_2$  可定义为三值测试，根据前面关于测量值的取值区间得到故障与多值测试的相关性矩阵，如表4.26所示。

表 4.26 电缆线故障与多值测试的相关性矩阵  

<table><tr><td rowspan="2">相关性矩阵</td><td colspan="3">t1</td><td colspan="3">t2</td></tr><tr><td>0~10</td><td>10~20</td><td>20~∞</td><td>0~5</td><td>5~10</td><td>10~∞</td></tr><tr><td>无故障</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td></tr><tr><td>电缆1-开路</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td></tr><tr><td>电缆1-短路</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0</td><td>0</td></tr><tr><td>电缆2-开路</td><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td></tr><tr><td>电缆2-短路</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td></tr></table>



# 4.7 本章小结

本章首先引入故障测试相关性的概念，接着介绍了由故障树、符号有向图等传统诊断模型获取相关性矩阵的方法；然后介绍了两种经典的测试性模型——信息流模型和多信号模型。
